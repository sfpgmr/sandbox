<!DOCTYPE html>

<html lang="ja" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-15457703-9"></script>
  <script>
    if (!location.hostname.match(/localhost/)) {
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-15457703-9');
    }
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>トップページをリニューアルする</title>
  <meta name="description" content="リニューアル用のトップページデザインを考えて実装する" />
  <meta name="keywords" content="Programming,Music,HTML5,WebGL,javascript,WebAudio" /> 	
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta itemprop="image" content="https://www.sfpgmr.net/img/sfweb.png" />
  <meta itemprop="name" content="S.F. Web" />
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="S.F. Web" />
  <meta name="twitter:url" content="./index7.html" />
  <meta name="twitter:title" content="リニューアル用のトップページデザイン" />
  <meta name="twitter:description" content="リニューアル用のトップページデザインを考えて実装する" />
  <meta name="twitter:image" content="https://www.sfpgmr.net/img/sfweb.png" />
  
  <meta property="og:type" content="article">
  <meta property="og:url" content="./index7.html" />
  <meta property="og:title" content="リニューアル用のトップページデザイン"/>
  <meta property="og:site_name" content="S.F. Web" />
  <meta property="og:description" content="Programming,Music,HTML5,WebGL,javascript,WebAudio">
  <meta property="og:image" content="https://www.sfpgmr.net/img/sfweb.png">

  <style>
    * {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    html {
      margin: 0;
      padding: 0;
      font-size:10px;
    }

    body {
      margin: 0;
      padding: 0;
      background: black;
      color: white;
    }

    .top-nav {
      position:fixed;
      z-index:99999;
      background: rgba(0,0,0,0.5);
      display: block;
      width:100%;
      height:32px;
      color:white;
    }
    #sentinel {
      width:0px;
      height:0px;
    }
    .contents {
      padding-top:32px;
      width: 100%;
      position: relative;
      content: strict;
    }

    @keyframes blinking {
      0% {
        color: black;
      }

      50% {
        color: white;
      }

      100% {
        color: black;
      }
    }

    .loading {
      font-family: monospace;
      font-size: 24px;
      position: fixed;
      width: 100vw;
      height: 100vh;
      text-align: center;
      padding-top: 50vh;
      z-index: 32768;
      background: black;
      animation: blinking 2s infinite;
      content: strict;
    }


    .contents > article {
      background: #f0f0f0;
      color: #202020;
      position: absolute;
      max-height: 960px;
      overflow: auto;
      border-radius: 3px;
     /* transition: opacity 1s linear;*/
      opacity: 1.0;
    }

    .tweet-header {
      display: grid;
      align-items: end;
      grid-template-columns: 40px 2fr 1fr;
      grid-template-rows: 1fr;
      font-size: 12px;
      font-weight: bold;
    }


    .tweet-img {
      width: 100%;
      object-fit: cover;
    }

    .youtube {
      position: relative;
      cursor: pointer;
    }

    .youtube > img {
      width: 100%;
      object-fit: cover;
    }

    .youtube > svg.player-play {
      width:64px;
      height:64px;
      left:calc(50% - 32px);
      top:calc(50% - 32px);
      position:absolute;
      z-index: 1000;
      opacity: 0.5;
    }
    
    .youtube:hover > svg.player-play {
      opacity: 1.0;
    }

    .youtube:hover .player-play-1 {
      stroke:#80808080;
    }

    
    .youtube > div.yt-title {
      /*text-shadow: #fff 1px 1px 0;*/
      font-size: 1.2rem;
      color:white;
      background:rgba(0, 0,0,0.5);
      position:absolute;
      left:0;
      top:0;
      overflow: auto;
      z-index:998;
    }


    .tweet-profile-img {
      grid-column: 1/2;
      width: 32px;
      height: 32px;
      border-radius: 50%;
    }

    .tweet-user-name {
      grid-column: 2/3;
    }

    .tweet-date {
      font-size: 8px;
      text-align: right;
      grid-column: 3/4;
    }

    .contents>twitter-widget {
      overflow: auto;
      max-height: 960px;
      position: absolute;
    }

    .contents>article>section>.tweet-text {
      display: block;
      padding: 4px;
      word-break: break-all;
      font-size: 12px;
    }

    .contents>article>h3 {
      font-size: 12px;
    }

    blockquote.card {
      margin:4px;
      padding:4px;
      font-size:12px;
      background:white;
      border-radius: 4px;
    }

    blockquote.card > header {
      display:grid;
      grid-gap:4px;
      gap:4px;
    }

    blockquote.card-default > header {
      grid-template-columns:64px 1fr;
    }

    blockquote.card-large > header {
      grid-template-columns:1fr;
    }

    blockquote.card > header > img {
      width:100%;
    }


    div.no-image {
      display: block;
      width:64px;
      height:64px;
      background:gray;
      color:white;
      text-align: center;
      line-height: 64px;
    }

  </style>
</head>

<body>
  <div class="loading" id="loading">Loading</div>
  <header class="top-nav">
    <h1>S.F. Info.</h1>
  </header>
  <div class="contents" id="contents" rendersubtree="invisible skip-activation"> 
    
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145075916382466048"
            target="_blank">2019/6/30 6:05:47</a></p>
      </header>
      <section>
        <p class="tweet-text">今さらクォータニオンを学習中。。<br/><blockquote class="card card-default"><header><img  src="https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" /><a href="https://qiita.com/drken/items/0639cf34cce14e8d58a5" target="_blank">クォータニオン (Quaternion) を総整理！ ～ 三次元物体の回転と姿勢を鮮やかに扱う ～ - Qiita</a></header><div># 0. はじめに: クォータニオンについて思うこと<br/>はじめまして！<br/>[NTTデータ数理システム](http://www.msi.co.jp/)で[機械学習](https://ja.wikipedia.org/wiki/%E6%A9%...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145083962106138624"
            target="_blank">2019/6/30 6:37:45</a></p>
      </header>
      <section>
        <p class="tweet-text">あかん。難しい。今まで3次元空間での回転は軸固定でx,y,zのオイラー角で表してたのだが、回転軸ベクトルとラジアンを使って3次元の回転を表す方法をいまさら理解してさらにクォータニオンに行き着いたわけだが、朝一でこれはきつい。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145085314693656576"
            target="_blank">2019/6/30 6:43:08</a></p>
      </header>
      <section>
        <p class="tweet-text">回転のアニメーションをオイラー角でしていると妙な違和感があって。x,y,zを同じ角速度で回してるのになんかこう回転速度が変化するような感じになってしまうのはなんでかな。。と昔から思ってた。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.youtube.com/watch?v=Q5xShxUkbdE&feature=youtu.be" target="_blank">8x8x8Voxelの表示 - YouTube</a></header><div></div></blockquote><br/><br/><blockquote class="card card-large"><header><img  src="https://www.sfpgmr.net/sandbox/vox/common/icon.png" /><a href="https://www.sfpgmr.net/sandbox/vox/20190628/" target="_blank">voxファイルの表示</a></header><div>voxファイルの表示</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145086816321540096"
            target="_blank">2019/6/30 6:49:06</a></p>
      </header>
      <section>
        <p class="tweet-text">x,y,z軸固定でオイラー角でx,y,zをx,z,yの順番に回転行列を掛け合わせるのだが。各軸周りの回転が等速になってるように見えんところが気になるところだ。<br/><div class="youtube" data-type="yt" id="Q5xShxUkbdE"><div class="yt-title">Youtube - 8x8x8Voxelの表示</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/Q5xShxUkbdE" class="youtube" src="https://i.ytimg.com/vi/Q5xShxUkbdE/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145086817990873089"
            target="_blank">2019/6/30 6:49:06</a></p>
      </header>
      <section>
        <p class="tweet-text">これはひょっとして「ジンバル・ロック」によるものなのかと考えたりとかしてたり。わからんけどね。<br/>そこでまあ「ジンバル・ロック」のない回転とやらはどんな感じなのかと思ったわけだ。そこで思い出したのが「クォータニオン（四元数）」である。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145088110381826048"
            target="_blank">2019/6/30 6:54:14</a></p>
      </header>
      <section>
        <p class="tweet-text">しかし、「ジンバル・ロック」とやらはいくら頭の中で考えても全くイメージできんわけだ。これが。。<br/><blockquote class="card card-default"><header><img  src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Two-axis_gimbal.svg/1200px-Two-axis_gimbal.svg.png" /><a href="https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%B3%E3%83%90%E3%83%AB#%E3%82%B8%E3%83%B3%E3%83%90%E3%83%AB%E3%83%AD%E3%83%83%E3%82%AF" target="_blank">ジンバル - Wikipedia</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145088111640117248"
            target="_blank">2019/6/30 6:54:15</a></p>
      </header>
      <section>
        <p class="tweet-text">x,y,zの各軸は互いに直交してるわけで、なんで軸が重なるねん？？となって頭が混乱するわけだ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145088395112144896"
            target="_blank">2019/6/30 6:55:22</a></p>
      </header>
      <section>
        <p class="tweet-text">でまあこれを読んでみたわけだが。理解しとらんが「いいね」をつけとこう。。<br/><blockquote class="card card-default"><header><img  src="https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" /><a href="https://qiita.com/drken/items/0639cf34cce14e8d58a5" target="_blank">クォータニオン (Quaternion) を総整理！ ～ 三次元物体の回転と姿勢を鮮やかに扱う ～ - Qiita</a></header><div># 0. はじめに: クォータニオンについて思うこと<br/>はじめまして！<br/>[NTTデータ数理システム](http://www.msi.co.jp/)で[機械学習](https://ja.wikipedia.org/wiki/%E6%A9%...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145089026363232256"
            target="_blank">2019/6/30 6:57:53</a></p>
      </header>
      <section>
        <p class="tweet-text">こっちはクォータニオンを使うに必要な知識が書いてある。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="http://marupeke296.com/DXG_No10_Quaternion.html" target="_blank">その10 クォータニオンを学んでみよう！</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145089028670144514"
            target="_blank">2019/6/30 6:57:53</a></p>
      </header>
      <section>
        <p class="tweet-text">クォータニオンはさておいて、軸ベクトルとラジアン1個で任意の回転をあらわすことができることは理解したのである。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145090684933685248"
            target="_blank">2019/6/30 7:04:28</a></p>
      </header>
      <section>
        <p class="tweet-text">軸ベクトルをつかうと例えばx軸周りの回転は<br/>(1,0,0)になるわなあ。そしてx軸かつy軸周りの回転は<br/>(1,1,0)となるのだろうなと思う。でまあy軸だけ逆回転させたくば（1,-1,0)とすればよいのかなと。たしかに考えやすい気がするねえ。。考え方が間違って理解してなければの話だけど。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145091384598126592"
            target="_blank">2019/6/30 7:07:15</a></p>
      </header>
      <section>
        <p class="tweet-text">複数のボクセルデータを表示するために今改造してるところなんだけど、これを機会にオイラー角での指定をやめて、軸ベクトル＋ラジアンで回転を表すようにしてみるつもりである。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145091737259368448"
            target="_blank">2019/6/30 7:08:39</a></p>
      </header>
      <section>
        <p class="tweet-text">複数のボクセルデータを表示するのはサクっと作ってしまうつもりだったんだけど、WebGL2.0の理解が深まるにつれいろいろ盛り込みたいことが増えてきてる。盛り込みたいというか変更したいというか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145115564852957184"
            target="_blank">2019/6/30 8:43:20</a></p>
      </header>
      <section>
        <p class="tweet-text">ここまでの記録をまとめた。<br/><blockquote class="card card-default"><header><img  src="https://pimg.togetter.com/09ceedf135d8d4f510f373ce4668453a9a9051dd/68747470733a2f2f692e7974696d672e636f6d2f76692f513578536878556b6264452f687164656661756c742e6a7067" /><a href="https://togetter.com/li/1371369" target="_blank">自作WASMプリプロセッサとWeb要素技術を使ってレトロ・シューティングを作る - Togetter</a></header><div>自作WASMプリプロセッサとWeb要素技術を使ってPSGエミュレータを軽く作ってみた。そしていまレトロ・シューティングを作っている（進行中）。</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1145261212113887232"
            target="_blank">2019/6/30 18:22:05</a></p>
      </header>
      <section>
        <p class="tweet-text">160x100pxへのこだわりはやはり「N-TYPE」を見てからですな。これはほんとにすごい。<br/><div class="youtube" data-type="yt" id="Zelr8xan-eU"><div class="yt-title">Youtube - 【PC-8001】N-TYPE2【AABM2】</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/Zelr8xan-eU" class="youtube" src="https://i.ytimg.com/vi/Zelr8xan-eU/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146380156509888514"
            target="_blank">2019/7/3 20:28:22</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやく複数オブジェクトの表示ができるようになった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146380592734302209"
            target="_blank">2019/7/3 20:30:06</a></p>
      </header>
      <section>
        <p class="tweet-text">これがそう。なんの変哲もないポリゴンの立方体のように見えるが実はポイントスプライトで表示しているという。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.youtube.com/watch?v=gz9ZRL4H5Ok&feature=youtu.be" target="_blank">YouTube</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146381242658541570"
            target="_blank">2019/7/3 20:32:41</a></p>
      </header>
      <section>
        <p class="tweet-text">ここでUBO使おうと思ったんだけど、現時点の実装では思ったほどUniformバッファの恩恵を受けられないことが分かったのでやめた。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146496267847000066"
            target="_blank">2019/7/4 4:09:45</a></p>
      </header>
      <section>
        <p class="tweet-text">続いて複数キャラを同時に表示する部分を作らんといかんな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146496358573981696"
            target="_blank">2019/7/4 4:10:07</a></p>
      </header>
      <section>
        <p class="tweet-text">違うわ。複数の異なるオブジェクトだった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146531466580389888"
            target="_blank">2019/7/4 6:29:37</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやく所望のものができた感じですな。。<br/>3Dスプライトといったところか。<br/>この粗々なピクセルの感じがレトロっぽくて好みなんだよね。。<br/><br/><div class="youtube" data-type="yt" id="ynbLDQx9slQ"><div class="yt-title">Youtube - MagicaVoxelのデータをポイント・スプライトで表示する</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/ynbLDQx9slQ" class="youtube" src="https://i.ytimg.com/vi/ynbLDQx9slQ/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146552163029569536"
            target="_blank">2019/7/4 7:51:52</a></p>
      </header>
      <section>
        <p class="tweet-text">オブジェクトの描画は登場キャラの頂点情報を1つのArrayBufferにまとめて、drawArraysにオフセットをあたえることでキャラの切り替えをするわけですな。<br/><br/>gl.drawArrays(gl.POINTS, objInfo.vindex,objInfo.count);</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146552717294182405"
            target="_blank">2019/7/4 7:54:04</a></p>
      </header>
      <section>
        <p class="tweet-text">こうすればバッファ切り替えしなくても良くなる。でもバッファの切り替えなんてポインタの切り替えコストくらいじゃないかと思うからメリットはそんなにないかな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146554213041709057"
            target="_blank">2019/7/4 8:00:00</a></p>
      </header>
      <section>
        <p class="tweet-text">オブジェクトの情報も1つの大きなArrayBufferの１区画で管理するようにして、それをwasmから見えるようにする。wasmからそのメモリに書き込むことでキャラクターをコントロールするのですな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146865732908490752"
            target="_blank">2019/7/5 4:37:53</a></p>
      </header>
      <section>
        <p class="tweet-text">512個ほどキャラを表示。混沌として何が何だか。。<br/><div class="youtube" data-type="yt" id="dz6b6VdSMrU"><div class="yt-title">Youtube - MagicaVoxelのデータ表示</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/dz6b6VdSMrU" class="youtube" src="https://i.ytimg.com/vi/dz6b6VdSMrU/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146865734351351808"
            target="_blank">2019/7/5 4:37:53</a></p>
      </header>
      <section>
        <p class="tweet-text">現在の成果物。。Z座標に応じて輝度を暗くしてみている。フォグのかわり。。<br/><blockquote class="card card-large"><header><img  src="https://www.sfpgmr.net/sandbox/vox/common/icon.png" /><a href="https://www.sfpgmr.net/sandbox/vox/20190705/" target="_blank">voxファイルの表示</a></header><div>voxファイルの表示</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1146867568457555968"
            target="_blank">2019/7/5 4:45:10</a></p>
      </header>
      <section>
        <p class="tweet-text">次は入力とサウンド関係のめどをつけるか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1147241462175678466"
            target="_blank">2019/7/6 5:30:53</a></p>
      </header>
      <section>
        <p class="tweet-text">DataView,ArrayBuffe,TypedArrayを使うとJSか？と思うほど型やメモリアドレスを意識したメモリアクセスができるのがすごいなあ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1147243068300488704"
            target="_blank">2019/7/6 5:37:16</a></p>
      </header>
      <section>
        <p class="tweet-text">仮想テキストVRAMとボクセルデータ用のスプライトバッファを1つのArrayBufferにまとめることができた。更に同じArrayBufferに入力やサウンドのI/OをマッピングすればwasmモジュールからメモリマップドI/Oで操作できるようになる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1147243072054423553"
            target="_blank">2019/7/6 5:37:17</a></p>
      </header>
      <section>
        <p class="tweet-text">ここまでは想定通り実装できているわけですな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1147243075858599936"
            target="_blank">2019/7/6 5:37:18</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしWebGL2.0のシェーダーも整数値のビット演算ができるようになったから、頂点情報にフラグ情報をビット単位で詰めて渡せるようになったので頂点あたりのバイト数も節約できたわ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1147664759325511682"
            target="_blank">2019/7/7 9:32:55</a></p>
      </header>
      <section>
        <p class="tweet-text">ここまでをnoteにまとめた。<br/><br/><blockquote class="card card-default"><header><img  src="https://d2l930y2yx77uc.cloudfront.net/production/uploads/images/12797421/rectangle_large_type_2_28eb02ce62b360fc636cd4102f44e9f6.png" /><a href="https://note.mu/sfpgmr/n/n820f79152724" target="_blank">MagicaVoxelデータをWebGLのポイント・リスト（ポイント・スプライト）で疑似表示する｜sfpgmr｜note</a></header><div> mwasmのプリプロセッサをある程度完成させたところで、それ使ってゲームを作ろうとしている。wasmでゲームを作ろうと思ったら、リソースをメモリにマップしてアクセスできるようにしてやるか、JS側でリソースアクセスのための関数を作ってwasmにエクスポートする必要がある。JS側の関数を呼び出すのは安直でよいが、呼び出しのオーバーヘッドが気になるのでメモリにマップしてそこにwasmに書き込ませ、JS側でメモリをデコードして各種リソースにアクセスするようにすることにした。   内容はレトロ風の横スクロールシューティングである。パワーアップ可能な自機が敵をなぎ倒して進めるようなタイプのやつで</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148000666737991681"
            target="_blank">2019/7/8 7:47:42</a></p>
      </header>
      <section>
        <p class="tweet-text">入力部分は過去作ったコードを若干手直しして利用することにした。自分が作ったコードにしては割とよくできてる方でよかった。。次はサウンド部分ですな。。これはJSで作った波形メモリ音源をwasm<br/>で書き直すつもりだがさてどうなるか。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148170139956678656"
            target="_blank">2019/7/8 19:01:07</a></p>
      </header>
      <section>
        <p class="tweet-text">ただタッチパネルには対応してないんだな。これが。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148332946304069632"
            target="_blank">2019/7/9 5:48:04</a></p>
      </header>
      <section>
        <p class="tweet-text">これが一応入力クラスのテスト画面。ふつうはキーボードでゲームパッドを刺すとそっちに切り替わる。ボタンカスタマイズもできるようにしてるけどUIでは割愛。。<br/><br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/sandbox/gamepad/20190709/" target="_blank">ゲーム用入力クラスの作成</a></header><div></div></blockquote> https://t.co/HMQLUKpBPZ</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D--yug1U4AAm7Be.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148335186951602177"
            target="_blank">2019/7/9 5:56:58</a></p>
      </header>
      <section>
        <p class="tweet-text">さて、サウンド機能を実装するか。。以前JSで作った波形メモリ音源をwasm化しようかなと思ったが、PSGエミュレーション＋SCCエミュレーション＋αにしようかなと思ってる。YM2203相当のFM音源もいれてみたいと思うけどねえ。AudioWorklet+wasmでそこまでできるだろうか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148335188386050048"
            target="_blank">2019/7/9 5:56:58</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずPSGエミュレータにSCC相当の音源を載せることからはじめるか。シーケンサー機能も併せて作ろう。これはMIDIシーケンスデータを再生する仕様にしようかね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148337523560611840"
            target="_blank">2019/7/9 6:06:15</a></p>
      </header>
      <section>
        <p class="tweet-text">以前作った波形メモリ音源はWebAudioベッタリの仕様で、ゲインノードでエンベロープ・ジェネレータを作ってたりしてた。今回はなるたけAudioworklet内で処理を完結しようと思ってるので、ほぼ作り直しになる。作り直すならSCCに近いものを...と思ったわけ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148337828473925632"
            target="_blank">2019/7/9 6:07:28</a></p>
      </header>
      <section>
        <p class="tweet-text">できる限り整数（固定少数）を使ってチマチマ作るつもり。よって作業時間が相当かかりそうな気がする。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148338296306618369"
            target="_blank">2019/7/9 6:09:19</a></p>
      </header>
      <section>
        <p class="tweet-text">FM音源もあの出音の割には簡素なしくみだし、C/C++のソースならゴロゴロ転がってるのでそれを移植するだけで済みそうだよな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148364289314414592"
            target="_blank">2019/7/9 7:52:36</a></p>
      </header>
      <section>
        <p class="tweet-text">SCCの情報<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="http://d4.princess.ne.jp/msx/scc/scc2.html" target="_blank"></a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148366602166890498"
            target="_blank">2019/7/9 8:01:48</a></p>
      </header>
      <section>
        <p class="tweet-text">PSG3音、SCC5音、4オペFM3音、SID3音、8ビットDA2音くらいのスペックにできれば申し分ないんだけどなあ。。私にできるだろうか。言うても先人の遺産が大量にあるので、できんことはないだろうけどね。。ほぼ全部C/C++ のソースコードあるしなあ。私はチマチマwasm<br/>に書き換えるだけなんだけどね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148366881998290944"
            target="_blank">2019/7/9 8:02:54</a></p>
      </header>
      <section>
        <p class="tweet-text">MAMEのコードがすごいんだよなあ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148367682128891904"
            target="_blank">2019/7/9 8:06:05</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしなんでこんなに音源を豊富にしたいかというと、単なる趣味ですが。SPC700なんかも興味あるんだよなあ。。ゲームコンソールの中で唯一興味のある音源ですわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148368410847277056"
            target="_blank">2019/7/9 8:08:59</a></p>
      </header>
      <section>
        <p class="tweet-text">SPC700も調べて過去にブログ記事にしてみたんだけど、なぜかAD-PCMの解説みたいになっちゃった。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/blog/entry/%E3%82%B9%E3%83%BC%E3%83%95%E3%82%A1%E3%83%9F%E9%9F%B3%E6%BA%90spc700%E3%82%92%E6%8E%A2%E3%82%8B%EF%BC%88%EF%BC%91%EF%BC%89.html" target="_blank"></a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148671766597791744"
            target="_blank">2019/7/10 4:14:25</a></p>
      </header>
      <section>
        <p class="tweet-text">完全なエミュレーションをするのではなく、オシレータをFMか波形メモリかSIDの波形選択としてあとはフィルタとEGを作ればいいだけのような気もするな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148672280760688640"
            target="_blank">2019/7/10 4:16:27</a></p>
      </header>
      <section>
        <p class="tweet-text">結局チップに足りない機能はソフトウェアで補完して、最終的にはそのような形になるもんね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148676136747986944"
            target="_blank">2019/7/10 4:31:47</a></p>
      </header>
      <section>
        <p class="tweet-text">MAMEのソースコード久しぶりに読もうと思ってリポジトリクローンしたら結構大きいな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148687774972669952"
            target="_blank">2019/7/10 5:18:01</a></p>
      </header>
      <section>
        <p class="tweet-text">mame/src/devices/sound のソースがもう宝の山というか。「サウンドチップ・エミュレータの聖地」といっても過言ではない。。ありがたく拝読させていただこう。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148687777245962240"
            target="_blank">2019/7/10 5:18:02</a></p>
      </header>
      <section>
        <p class="tweet-text">やっぱりあれだよな。オシレータをPSG/SCC/SID/FMとすればいけるよなあ。コントロールI/Fはオリジナルでいこう。といってもEGのかかり方はそれぞれ（<br/>SID/FM）だからそこをどう考えるかだな。「まんま」の音を出すつもりではなくて、いちおうオリジナル音源にするつもりだからな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148689088423137280"
            target="_blank">2019/7/10 5:23:14</a></p>
      </header>
      <section>
        <p class="tweet-text">MAMEの6581（SID）ソースのオシレータ部分を見るとやっぱり波形テーブルから読みだしてピッチ変える感じになってるんだよなあ。なのでこれも波形メモリがROMの音源の一種とみることができるな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148689089727586304"
            target="_blank">2019/7/10 5:23:15</a></p>
      </header>
      <section>
        <p class="tweet-text">いやしかし、SIDの設計はPSGチップとしては秀逸だと思うなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148689853346803712"
            target="_blank">2019/7/10 5:26:17</a></p>
      </header>
      <section>
        <p class="tweet-text">結局波形メモリにするとSCC/PSG/SIDのオシレータはカバーできるということになるな。だけどSCC/PSGとSIDはピッチの狂い方がそれぞれ異なるようだから、そこをどうするかだよなあ。ピッチは合わすようにするか。オリジナル音源だということをすぐ忘れそうになるなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148690781755998208"
            target="_blank">2019/7/10 5:29:58</a></p>
      </header>
      <section>
        <p class="tweet-text">自分で調べたドキュメントも見直すか。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/blog/entry/mos-sid-6581%E3%82%92%E8%AA%BF%E3%81%B9%E3%81%9F.html" target="_blank"></a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148690875645513728"
            target="_blank">2019/7/10 5:30:21</a></p>
      </header>
      <section>
        <p class="tweet-text">ほとんど内容忘れとるわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148691497581072384"
            target="_blank">2019/7/10 5:32:49</a></p>
      </header>
      <section>
        <p class="tweet-text">SIDはほんと「シンセ」の落としてるわ。フィルタがあるのが大きいんだよな。やっぱり。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="http://www.hypersynth.com/SIDizer/audio/MOS6581_Melody.mp3" target="_blank"></a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148692176072634369"
            target="_blank">2019/7/10 5:35:31</a></p>
      </header>
      <section>
        <p class="tweet-text">このSIDチップの存在は当時雑誌で知った。なのでC64が欲しくて仕方なかった。しかし結構高かったんだよな。日本でのC64は。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148693779156631552"
            target="_blank">2019/7/10 5:41:53</a></p>
      </header>
      <section>
        <p class="tweet-text">コモドール64miniを買ってしまった。。以外に安かったので。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://amzn.to/2NKuY1f" target="_blank">Amazon.co.jp: コモドール64 mini</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148693780570103808"
            target="_blank">2019/7/10 5:41:53</a></p>
      </header>
      <section>
        <p class="tweet-text">ということで間接的だが長年の夢がかなったわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148701138914402304"
            target="_blank">2019/7/10 6:11:08</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリのオシレータ＋PSGオシレータ、FM変調、リング変調、オシレータシンク、フィルタ、アンプ・フィルタEGで構成すればまあ所望のものになるよなあ。普通のシンセの構成ですがな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148701390971142149"
            target="_blank">2019/7/10 6:12:08</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリの内容を6581のにすればSIDっぽい音も鳴るだろうし。問題はフィルタ特性かあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1148899954234032128"
            target="_blank">2019/7/10 19:21:09</a></p>
      </header>
      <section>
        <p class="tweet-text">まあとりあえずはSCCのまがい物を作るところから始めるとするか。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149083414458277888"
            target="_blank">2019/7/11 7:30:09</a></p>
      </header>
      <section>
        <p class="tweet-text">実装をし始めた。SCCの音源をBGMにとスペースマンボウの動画を流しながらやってたら、聴いてるうちにやっぱりEG必要だよなあ、LFO<br/>必要だよなあ、フィルタも最初からあったほうがいいよなあ。。とかなってきて、結局普通の波形メモリ音源を実装する感じになってる。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149083417264324608"
            target="_blank">2019/7/11 7:30:10</a></p>
      </header>
      <section>
        <p class="tweet-text">SCC自体波形再生とピッチ、ボリュームだけなので、EGやLFOはソフトウェアで補ってる。そこも作らんといかんので音源の仕様として入れこんでしまおう思ったわけ。全部ソフトウェアになるからね。結局。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149084070132867072"
            target="_blank">2019/7/11 7:32:45</a></p>
      </header>
      <section>
        <p class="tweet-text">オシレータは差し替え可能にしようかなと思う。そうすれば大半の音源はサポートできるんではないかなと。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149785111698608129"
            target="_blank">2019/7/13 5:58:27</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっとwasm用のプリプロセッサに手を加えようと思ってる。最低やらないといかんのは<br/><br/>・リニアメモリの利用開始オフセット指定<br/>・構造体による相対オフセット・アドレス指定<br/><br/>ほんとはマクロ機能も付けたい＆記法も見直したいところだが、それはできればということで。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149810234979827714"
            target="_blank">2019/7/13 7:38:17</a></p>
      </header>
      <section>
        <p class="tweet-text">プリプロセッサの機能追加は思いのほか簡単だった。とりあえずこれでいこうか。マクロ機能はどうするかなあ。久しぶりにいじってみると独自記法の部分がなんだかなあ。。って感じになっている。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1149811150793482240"
            target="_blank">2019/7/13 7:41:55</a></p>
      </header>
      <section>
        <p class="tweet-text">メモリのオフセット定義もJSでもなくかといってS式でもなく、C風の表記になってるんだよね。ここはS式にしておけばよかったかなあと今は思ってる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1150698728027590661"
            target="_blank">2019/7/15 18:28:50</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやく波形テーブルを指定のピッチ・ボリュームで再生するWASMを書き終えたところ。これからUIとAudioWorkletとのつなぎコードを書いて、そのあとデバッグしようと思う。EG・LFO・フィルタはそのあとだなあ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1150699533384347649"
            target="_blank">2019/7/15 18:32:02</a></p>
      </header>
      <section>
        <p class="tweet-text">波形テーブルはSCCに倣って8ビット×32サンプルの波形を5CH持たせている。でまあこれを指定ピッチ（Hz）で鳴らすのをどうしようかと高校野球観戦（千葉県大会）の合間に考えていた。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1150700229064155137"
            target="_blank">2019/7/15 18:34:48</a></p>
      </header>
      <section>
        <p class="tweet-text">画面はPSGエミュレータのを少し改造して、これに波形エディットするUIを加えればいいかなあと思っている。 https://t.co/gjQ79kx24X</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_gbwipU4AErU8_.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1150701355587125248"
            target="_blank">2019/7/15 18:39:16</a></p>
      </header>
      <section>
        <p class="tweet-text">今週はUIを作って音を鳴らすところまでを目標とするか。。そのあとEG・LFO・フィルタを作ればまあなんとかなるだろう。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1150867697518821376"
            target="_blank">2019/7/16 5:40:15</a></p>
      </header>
      <section>
        <p class="tweet-text">テスト用のUIを構築中。。 https://t.co/QdnXNaRgYX</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_i0EbwX4AIZfES.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151225481628246016"
            target="_blank">2019/7/17 5:21:58</a></p>
      </header>
      <section>
        <p class="tweet-text">ここまで作りかけてあれなのだが、設計を見直すことにした。というか昔書いた古いコードの改良で済ますことにしたといったほうがいいだろうか。古いコードというのはこれなんだけど。<br/><br/><blockquote class="card card-default"><header><img  src="https://avatars0.githubusercontent.com/u/3806814?s=400&v=4" /><a href="https://github.com/sfpgmr/2dshooting2/blob/master/src/js/audio.js" target="_blank">2dshooting2/audio.js at master · sfpgmr/2dshooting2 · GitHub</a></header><div>HTML5,WebGL,WebAudioで縦スクロールシューティングゲームを作る. Contribute to sfpgmr/2dshooting2 development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151225483285057537"
            target="_blank">2019/7/17 5:21:58</a></p>
      </header>
      <section>
        <p class="tweet-text">いろいろ考えると、AudioWorkletの中でいろいろやるのはパフォーマンス的にもまたWeb Audio APIを生かすという面でもあまり意味はないなあ。。と考えた。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151225484656533504"
            target="_blank">2019/7/17 5:21:58</a></p>
      </header>
      <section>
        <p class="tweet-text">オシレータ部分のみをAudioWorkletにして、そこをwasmで書く感じに変えようかなと思ったんだよね。考えはまた変わるかもしれんけどもね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151230282386702336"
            target="_blank">2019/7/17 5:41:02</a></p>
      </header>
      <section>
        <p class="tweet-text">例えばPSGのオシレータ部分だけとかね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151231756730695680"
            target="_blank">2019/7/17 5:46:54</a></p>
      </header>
      <section>
        <p class="tweet-text">今得られた知見（wasmとかAudioWorklet）を使って書き直すとどうなるのかといったところ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151232118191603712"
            target="_blank">2019/7/17 5:48:20</a></p>
      </header>
      <section>
        <p class="tweet-text">とはいえ昔書いたコードもすっかり忘れているのでソースコード読んで理解しなくてはならんのだが（笑）。シーケンサ部分はモハヨナオさんのmml-parser使ってるんだよね。確か。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151577005055307776"
            target="_blank">2019/7/18 4:38:47</a></p>
      </header>
      <section>
        <p class="tweet-text">私が持ってるchuwiのandroid tabでPSGエミュレータを動かしてみたんだけど、やっぱりもたつく。もたつくと音がとぎれとぎれになる。何が原因かなと考えた。私のコードの書き方が悪いのかはそれは置いといて。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151577006418485248"
            target="_blank">2019/7/18 4:38:48</a></p>
      </header>
      <section>
        <p class="tweet-text">ひとつ思ったのはJSからwasmへのコールがやっぱり言語境界を超えるので遅いのかなと。この記事を過去に読んだからなんだけど。<br/><blockquote class="card card-large"><header><img  src="https://hacks.mozilla.org/files/2018/10/call_opts_featured_image.png" /><a href="https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%F0%9F%8E%89/" target="_blank">Calls between JavaScript and WebAssembly are finally fast 🎉 - Mozilla Hacks - the Web developer blog</a></header><div>At Mozilla, we want WebAssembly to be as fast as it can be. This started with its design, which gives it great throughput. Then we improved load times with a ...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151577234970333184"
            target="_blank">2019/7/18 4:39:42</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにPSGエミュレータというのはこれなんだけどね。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/dev/psg-emulator/" target="_blank">WASMでPSG Emulatorを作る</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151584184898445313"
            target="_blank">2019/7/18 5:07:19</a></p>
      </header>
      <section>
        <p class="tweet-text">この記事によるとJS-&gt;wasmへの呼び出しは１億回で5500msだと書いてある。とすると１回あたり約0.055μsということになりますな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151584186399989760"
            target="_blank">2019/7/18 5:07:20</a></p>
      </header>
      <section>
        <p class="tweet-text">サンプリングレートが48khzのとき、AudioWorkletが呼び出される周期は<br/><br/>1/48000 * 1000 * 1000 * 128 =  2666μs<br/><br/>となる。１サンプルあたりだと約20.8μsか。a-rateのパラメータを考えると１サンプルごとに処理しなくてはならないから0.055*128=7.04μsか。。そんなに大きな影響はないのかな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151584933594271744"
            target="_blank">2019/7/18 5:10:18</a></p>
      </header>
      <section>
        <p class="tweet-text">あ、ここで自分の環境での計測ができるのか。。<br/><br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://bnjbvr.github.io/perf-wasm-calls/" target="_blank"></a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151585656818192384"
            target="_blank">2019/7/18 5:13:10</a></p>
      </header>
      <section>
        <p class="tweet-text">あら、JStoJSとJStoWasmと関数呼び出し比較するとJsTowasm関数呼び出しのほうが２倍以上遅いみたいだな。まあ言語境界におけるオーバーヘッドがあるのはしょうがないわな。 https://t.co/Ye8j8vAqvV</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_tBDA_U4AApqtb.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151586504839331840"
            target="_blank">2019/7/18 5:16:32</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにさっきのはchromeでの話で、firefoxだとJsToWasmのほうが速くなるんだな。。 https://t.co/KWBIaXfgKa</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_tB0jVVUAATwZw.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151587359797866496"
            target="_blank">2019/7/18 5:19:56</a></p>
      </header>
      <section>
        <p class="tweet-text">これはなんでかというと先ほどの記事に書いてあるんだな。トランポリン関数を介さずネイティブ同士で呼び出すようにして、呼び出しコストを削減してるんだよな。簡単にいうと。。<br/><blockquote class="card card-large"><header><img  src="https://hacks.mozilla.org/files/2018/10/call_opts_featured_image.png" /><a href="https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%F0%9F%8E%89/" target="_blank">Calls between JavaScript and WebAssembly are finally fast 🎉 - Mozilla Hacks - the Web developer blog</a></header><div>At Mozilla, we want WebAssembly to be as fast as it can be. This started with its design, which gives it great throughput. Then we improved load times with a ...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151587746663694336"
            target="_blank">2019/7/18 5:21:28</a></p>
      </header>
      <section>
        <p class="tweet-text">ようし、これからはFirefoxでいこう！と言いたいところだが、AudioWorkletはFirefoxではサポートしてないんだな。これが。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151589270567567360"
            target="_blank">2019/7/18 5:27:32</a></p>
      </header>
      <section>
        <p class="tweet-text">ただ96KHzのサンプリングレート、2.6ms以内で音声処理すべてをこなそうとするのはJS/WASMでは難しいかもしれんね。別スレッドで先行処理してバッファリングしておいて、AudioWorklet内ではバッファコピー位に留めておくくらいが現実的なのかもね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151590071272759296"
            target="_blank">2019/7/18 5:30:43</a></p>
      </header>
      <section>
        <p class="tweet-text">このようなことは別の手段でもできるから、このアイデアもあまりAudioWorkletをうまく使っているとは言えんねぇ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151611221759500288"
            target="_blank">2019/7/18 6:54:45</a></p>
      </header>
      <section>
        <p class="tweet-text">違うな。96khzだと1.3msか。。128サンプル単位だと。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151710080603045888"
            target="_blank">2019/7/18 13:27:35</a></p>
      </header>
      <section>
        <p class="tweet-text">もしWASMを使うなら、AudioWorklet使うならJSでバッファコピーだけするようにして、別にタイマーかワーカーかで５０ms単位くらいの大きい括りで処理するのがよいかもね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151931020607778816"
            target="_blank">2019/7/19 4:05:31</a></p>
      </header>
      <section>
        <p class="tweet-text">これもちょっと試してみるか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151948027189321729"
            target="_blank">2019/7/19 5:13:06</a></p>
      </header>
      <section>
        <p class="tweet-text">メインスレッドのタイマー処理でオーディオをレンダリングしてバッファ（おそらくリングバッファ）に溜め込んでおいて、AudioWorkletがそのバッファを128byteずつ読み込んで処理することを考えている。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151949120518545408"
            target="_blank">2019/7/19 5:17:27</a></p>
      </header>
      <section>
        <p class="tweet-text">気になっているのが不要なメモリコピー。ワーカー間のデータのやり取りはpostMessageでやるんだけどその時にメモリのコピーが発生するんだよな。なのでAudioWorklet側とメモリを共有したいという欲求が出てくるんだよね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151949125358723072"
            target="_blank">2019/7/19 5:17:28</a></p>
      </header>
      <section>
        <p class="tweet-text">こういう時のためにどうもSharedMemoryBufferちゅうのが用意されとるらしいのだが、ただMDNを見ると「Spectre対応のために無効化した」と書いてあるんだな。。 https://t.co/vivLDeTdf4</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_yLn5BUcAApMAV.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151949617203802112"
            target="_blank">2019/7/19 5:19:25</a></p>
      </header>
      <section>
        <p class="tweet-text">別の情報では復活したようなことも書いてあるんだけどもね。。<br/><blockquote class="card card-large"><header><img  src="https://www.sitepen.com/blog/wp-content/uploads/2018/09/sharedarraybuffers-atomics-_blog-min.jpg" /><a href="https://www.sitepen.com/blog/the-return-of-sharedarraybuffers-and-atomics/" target="_blank">The Return of SharedArrayBuffers and Atomics - Blog | SitePen</a></header><div>A common complaint of modern web apps is the concept of jank; web pages being unresponsive to user input and frame rates being low. Left unmitigated, this problem leads to a poor quality experience for end users of our web applications.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151950696544997376"
            target="_blank">2019/7/19 5:23:42</a></p>
      </header>
      <section>
        <p class="tweet-text">現状のブラウザサポート状況は惨憺たるものですな。Chromeだけのようだ。今は。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://caniuse.com/#feat=sharedarraybuffer" target="_blank">Can I use... Support tables for HTML5, CSS3, etc</a></header><div></div></blockquote> https://t.co/DOrFhsodDa</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_yNDVqUYAEIX67.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151951619019292672"
            target="_blank">2019/7/19 5:27:22</a></p>
      </header>
      <section>
        <p class="tweet-text">まあしかし、AudioWorklet使ってる時点でChromeしか動かんのだが（笑）。近々にはEdgeでも動くようになると思うけどね。Chromeとべースは同じになるからね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151961240282882048"
            target="_blank">2019/7/19 6:05:36</a></p>
      </header>
      <section>
        <p class="tweet-text">SharedArrayBuffer使ってやってみますか。一度。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151962928171536384"
            target="_blank">2019/7/19 6:12:19</a></p>
      </header>
      <section>
        <p class="tweet-text">「所有権の譲渡 (Transferable Objects) によるデータの引き渡し」ちゅうのもあるのかな？<br/><blockquote class="card card-default"><header><img  src="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png" /><a href="https://developer.mozilla.org/ja/docs/Web/API/Web_Workers_API/Using_web_workers#Passing_data_by_transferring_ownership_(transferable_objects)" target="_blank">Web Worker の使用 - Web API | MDN</a></header><div>Web Worker は、ウェブコンテンツがスクリプトをバックグラウンドのスレッドで実行するためのシンプルな手段です。 Worker スレッドは、ユーザーインターフェイスを妨げることなくタスクを実行できます。加えて、それらは (responseXML 属性や channel 属性は常に null ですが) XMLHttpRequest を使用して入出力を行うこともできます。生成された Worker は、生成元が指定したイベントハンドラーへメッセージを送ることにより JavaScript コードへメッセージを送ることができます (その逆も可能です)。本記事では、 Web Workers の使い方を詳しく紹介します。</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151964989986443264"
            target="_blank">2019/7/19 6:20:30</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしこれ使うと、所有権がワーカーに移るんだな。ということはオーディオをバッファにレンダリングするたびにnew ArrayBuffer()しなければならなくなるちゅうことですわ。そのコストも結構高い気がする。やっぱりSharedArrayBufferだよなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151986137222672385"
            target="_blank">2019/7/19 7:44:32</a></p>
      </header>
      <section>
        <p class="tweet-text"><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://2ality.com/2017/01/shared-array-buffer.html" target="_blank">ES proposal: Shared memory and atomics</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1151989351821131777"
            target="_blank">2019/7/19 7:57:19</a></p>
      </header>
      <section>
        <p class="tweet-text">そういえば、WebAudioってオフラインレンダリングできるんじゃなかったっけ？</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152291731074777089"
            target="_blank">2019/7/20 3:58:51</a></p>
      </header>
      <section>
        <p class="tweet-text">GPUでオフライン処理するっちゅう手もあるわなあ。。だんだんWASMから離れていってるけど。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152293376407920640"
            target="_blank">2019/7/20 4:05:24</a></p>
      </header>
      <section>
        <p class="tweet-text">具体的にいうとtransform feedbackを使うということだけどね。<br/><blockquote class="card card-large"><header><img  src="https://ics.media/entry/17505/images/eyecatch.png" /><a href="https://ics.media/entry/17505/" target="_blank">サンプルで理解するWebGL 2.0 - Transform Feedbackによるパーティクル表現 - ICS MEDIA</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152293377997590528"
            target="_blank">2019/7/20 4:05:24</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしこれもGPU &lt;-&gt; CPU間のデータの受け渡しで時間がかかるのではないかなということ。あとはコールのコストがあるのでできれば大きいまとまりで処理すべきかなと。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152293379268435968"
            target="_blank">2019/7/20 4:05:24</a></p>
      </header>
      <section>
        <p class="tweet-text">WebAudioのAudioWorkletでは128サンプル単位の処理となるから、サンプリングレートを考慮しながらバッファサイズを求めてそれを共有することになるだろうね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152294019772248064"
            target="_blank">2019/7/20 4:07:57</a></p>
      </header>
      <section>
        <p class="tweet-text">wasmでやるならFixed Width SIMDが使えるようになるとうれしいのだが。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.chromestatus.com/feature/6533147810332672" target="_blank">WebAssembly SIMD - Chrome Platform Status</a></header><div></div></blockquote><br/>主要ブラウザは「実装中」のステータスですな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152306042325196800"
            target="_blank">2019/7/20 4:55:43</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにこれはWebAudio + JSの波形メモリ音源。昔作ったやつに手をちょっとだけ加えた。<br/><div class="youtube" data-type="yt" id="RSGmF2W3lMg"><div class="yt-title">Youtube - WebAudioで波形メモリ音源を作る</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/RSGmF2W3lMg" class="youtube" src="https://i.ytimg.com/vi/RSGmF2W3lMg/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152313806300729344"
            target="_blank">2019/7/20 5:26:35</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにこれだとAndroid Tabでも再生にモタリはほぼない。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152314035800403968"
            target="_blank">2019/7/20 5:27:29</a></p>
      </header>
      <section>
        <p class="tweet-text">フィルタはないし、音量のEGだけでピッチEGもないからそりゃまあそうかなあ。。といった感じだ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152331834866274304"
            target="_blank">2019/7/20 6:38:13</a></p>
      </header>
      <section>
        <p class="tweet-text">AudioWorkletってhttpsで配信されんと動かんのね。localhostは例外的にhttpが利用可能とのこと。wsl -&gt; wsl2に移行して気づいた。wsl2だと仮想マシンのIPがつくのでlocalhost(127.0.0.1)ではテストできんのよね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152331836267233280"
            target="_blank">2019/7/20 6:38:13</a></p>
      </header>
      <section>
        <p class="tweet-text">それでAudioContext.audioWorklet.addModuleでエラー。httpだとAudioContext.audioWorkletプロパティ自体が存在しなくなるんだな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152712609105244160"
            target="_blank">2019/7/21 7:51:17</a></p>
      </header>
      <section>
        <p class="tweet-text">一つのアプローチとして、<br/><br/>1. web workerの中でwasmを動かして、メモリにレンダリング<br/>2. メインスレッドがメモリをAudioWorkletに渡す<br/>3. AudioWorkletがメモリを128サンプルずつ処理<br/><br/>を試そうとしてる。この間を取り持つのをSharedArrayBufferに担ってもらおうと思った。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152713842066984960"
            target="_blank">2019/7/21 7:56:10</a></p>
      </header>
      <section>
        <p class="tweet-text">メモリ転送コストというか、コピーのコストは極力減らした形で処理したいと思ったんだな。しかし考えるとWebAssembly.Memoryで作るメモリはSharedArrayBufferにはなれないんですな。現状。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152714588338548737"
            target="_blank">2019/7/21 7:59:08</a></p>
      </header>
      <section>
        <p class="tweet-text">だからWASMのメモリからSharedArrayBufferへのメモリコピーが発生するんですな。それで過去こんなproposalがあったのですな。。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/design/issues/950" target="_blank">allow Memory.buffer to be a SharedArrayBuffer · Issue #950 · WebAssembly/design · GitHub</a></header><div>Some background: I&#39;m working on Browsix, a tool for running multiple C, C++, Go and node.js programs as processes in the browser. We do this for C programs by compiling with a (fork) of Emscrip...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152716019678380033"
            target="_blank">2019/7/21 8:04:50</a></p>
      </header>
      <section>
        <p class="tweet-text">この話はその後wasmのthreadsで議論されて、最終的には<br/><br/>let memory = new WebAssembly.Memory({initial: 1, maximum: 1, shared: true});<br/><br/>「shared」を「true」とすることでSharedArrayBufferになることができるようだ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152716266446049280"
            target="_blank">2019/7/21 8:05:49</a></p>
      </header>
      <section>
        <p class="tweet-text"><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/threads/blob/master/proposals/threads/Overview.md#threading-proposal-for-webassembly" target="_blank">threads/Overview.md at master · WebAssembly/threads · GitHub</a></header><div>Threads and Atomics in WebAssembly. Contribute to WebAssembly/threads development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152716606453141505"
            target="_blank">2019/7/21 8:07:10</a></p>
      </header>
      <section>
        <p class="tweet-text">threadsの仕様も読んどこう。<br/><br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/design/blob/master/FutureFeatures.md#threads" target="_blank">design/FutureFeatures.md at master · WebAssembly/design · GitHub</a></header><div>WebAssembly Design Documents. Contribute to WebAssembly/design development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152718403536216065"
            target="_blank">2019/7/21 8:14:18</a></p>
      </header>
      <section>
        <p class="tweet-text">threads/SharedArrayBufferはchromeではflagで使えるようにはできるみたいだな。 https://t.co/ruu1Rp4Z0s</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/D_9HRtfUcAA8jwv.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152719735487729665"
            target="_blank">2019/7/21 8:19:36</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっと試してみようか。SharedArrayBufferはspectre問題で一度すべてのブラウザでdisableにされ、chrome以外のブラウザはまだ使えるようにはなってないようだが、そこの理由も知りたいところだが。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152721411863011333"
            target="_blank">2019/7/21 8:26:15</a></p>
      </header>
      <section>
        <p class="tweet-text">なかなか重い議論っぽいね。。このあたり。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/1725583?s=400&v=4" /><a href="https://github.com/tc39/security/issues/3" target="_blank">SharedArrayBuffer and timing attacks (Meltdown and Spectre) · Issue #3 · tc39/security · GitHub</a></header><div>I think everyone was aware that ShareArrayBuffer allows for creating accurate timers. With the recent release of Meltdown and Spectre, SharedArrayBuffer was disabled in all browsers.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152721841812676609"
            target="_blank">2019/7/21 8:27:58</a></p>
      </header>
      <section>
        <p class="tweet-text">そもそもspectreとかの話って何が問題なのかよくわかってないよなあ。私は。。過去記事をちゃんと読んどくか。そして現状その問題はどうなっているのかだよな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152740878936498176"
            target="_blank">2019/7/21 9:43:37</a></p>
      </header>
      <section>
        <p class="tweet-text">chromeがSharedArrayBufferを再度有効化したのはSite Isorationしたからなのか。。<br/><blockquote class="card card-default"><header><img  src="https://cdn.slidesharecdn.com/ss_thumbnails/spectre-190121110913-thumbnail-4.jpg?cb=1548069046" /><a href="https://www.slideshare.net/herumi/spectremeltdown#23" target="_blank">Spectre/Meltdownとその派生</a></header><div>SCAIS 2019 (Small-workshop on Communications between Academia and Industry for Security) https://researchmap.jp/sug/SCAIS2019/ の発表資料</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152837966781284352"
            target="_blank">2019/7/21 16:09:24</a></p>
      </header>
      <section>
        <p class="tweet-text">CPUのアーキテクチャを追っかけてたのはスーパースケーラとかというワードが目新しいころ。Penitum登場のころくらいまで。分岐予測とかね。今は3次キャッシュ、投機的実行、マルチコア、SIMDとかまあてんこ盛りでまったくついていけてないわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152842117909102594"
            target="_blank">2019/7/21 16:25:54</a></p>
      </header>
      <section>
        <p class="tweet-text">キャッシュにのると実行時間が短縮されるから、それを高精度タイマーで計測して値を特定するということなのかね？なんかすごい話だな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152857618219589633"
            target="_blank">2019/7/21 17:27:29</a></p>
      </header>
      <section>
        <p class="tweet-text">いやそういう話でもないのか。これ読んだけど全く理解できん。なんでこれで任意のメモリを読むことができるのか。。<br/><blockquote class="card card-large"><header><img  src="https://speakerd.s3.amazonaws.com/presentations/252abc2983124c0b96ff8ae064ba7bbd/slide_0.jpg?428711" /><a href="https://speakerdeck.com/sat/tu-jie-dewakaruspectretomeltdown" target="_blank">図解でわかるSpectreとMeltdown - Speaker Deck</a></header><div>A brief explanation of spectre(variant 1) and Meltdown(variant 3)</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1152861831041441792"
            target="_blank">2019/7/21 17:44:14</a></p>
      </header>
      <section>
        <p class="tweet-text">まあこれくらいの理解でいいか。。<br/><blockquote class="card card-large"><header><img  src="https://ogimage.blog.st-hatena.com/10328537792364434636/8599973812335354215/1515466221" /><a href="http://abcdef.gets.b6n.ch/entry/2018/01/09/115021" target="_blank">ブラウザベンダーのSpectre and Meltdown対応 - abcdefGets</a></header><div>Spectre and Meltdownについては前回書いたが、 各ブラウザベンダーがとっている対応について今回は書く。 といっても大したことではないのだが。 対応一覧 Google Chrome SharedArrayBufferのデフォルト無効化とPerformance.nowの解像度を下げる（どこまでかは不明） Per Site Isolationを有効化 Firefox SharedArrayBufferのデフォルト無効化とPerformance.nowの解像度を20μsまで下げる Safari SharedArrayBufferのデフォルト無効化とPerformance.nowの解像…</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153044373690408960"
            target="_blank">2019/7/22 5:49:35</a></p>
      </header>
      <section>
        <p class="tweet-text">いろいろ調べて、ここに行き着いている。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.chromestatus.com/feature/5724132452859904" target="_blank">WebAssembly Worker Based Threads - Chrome Platform Status</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153044375233945600"
            target="_blank">2019/7/22 5:49:36</a></p>
      </header>
      <section>
        <p class="tweet-text">Chrome 74以降、WebAssemblyのスレッドサポートが既定で有効化されているんだな。ということはMemoryのオプションsharedが使えるということだよね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153044376458653696"
            target="_blank">2019/7/22 5:49:36</a></p>
      </header>
      <section>
        <p class="tweet-text">ということはWebAssemblyのメモリをshared=trueで作成すると、そのベースとなるbufferは共有利用できる状態になる。つまりSharedArrayBufferになるというわけですわな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153044377599528960"
            target="_blank">2019/7/22 5:49:36</a></p>
      </header>
      <section>
        <p class="tweet-text">threadサポートと言っても、別にwasmにスレッドコントロールができるわけではなくて、スレッドで問題となるメモリアクセス競合を回避するための命令が追加されるだけなんだよな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153046707145285632"
            target="_blank">2019/7/22 5:58:52</a></p>
      </header>
      <section>
        <p class="tweet-text">つまり、WebAssembly.Memoryをshared=trueで作成すれば、メインスレッド、worker、AudioWorklet間でメモリコピーが発生することなくデータのやり取りができるようになるということなんだな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153047965444952064"
            target="_blank">2019/7/22 6:03:52</a></p>
      </header>
      <section>
        <p class="tweet-text">スレッドにおけるメモリアクセス競合の回避手法についてはそりゃもうC/C++の世界では語りつくされた感があるよね。そのあたりを多少知ってると理解しやすいよね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153048832722100224"
            target="_blank">2019/7/22 6:07:18</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっとそれるけど、chrome 75だとメモリのバルク・コピー命令も実装されたようだね。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.chromestatus.com/feature/4590306448113664" target="_blank">WebAssembly Bulk Memory Operations - Chrome Platform Status</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153049889263120385"
            target="_blank">2019/7/22 6:11:30</a></p>
      </header>
      <section>
        <p class="tweet-text">メモリ共有の恩恵を受けるのは大きいサイズの場合であって、小さい場合はコピーとそう変わらないんじゃないかという気もする。メモリ共有自体コストがかかる処理だもんね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153273949997813760"
            target="_blank">2019/7/22 21:01:51</a></p>
      </header>
      <section>
        <p class="tweet-text">さて高校野球チェックの合間にちょこちょこ実装してくとするか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153749388239314944"
            target="_blank">2019/7/24 4:31:04</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっと前に作ったPSGエミュレータのコードを少し改造してメインスレッドで作成したWebAssembly.MemoryをAudioWorklet上のwasmモジュールと共有できるか試してみた。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153751889294458880"
            target="_blank">2019/7/24 4:41:00</a></p>
      </header>
      <section>
        <p class="tweet-text">見た目は何も変わらないけどね。chromeはもうすでにwasmのthreadsサポートが既定で動くようになっていた。wasm側はメモリをimportして共有するように修正した。<br/><br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/sandbox/psg/releases/20190724/" target="_blank">WASMでPSG Emulatorを作る</a></header><div></div></blockquote> https://t.co/tIhrsb3bYM</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EALzOi5UEAA6wja.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153752964034486273"
            target="_blank">2019/7/24 4:45:16</a></p>
      </header>
      <section>
        <p class="tweet-text">(export "memory" (memory $memory))<br/>↓<br/>  (import "env" "memory" (memory $memory 1 1 shared))<br/><br/>wasm側は「shared」を入れ、wat2wasmで--enable-threadsをつけてwasm化する。私はwabt.js使ってるけどね。気を付けなればいけないのはメモリについては最大サイズ指定がsharedの時はmustだってこと。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153753707416178689"
            target="_blank">2019/7/24 4:48:14</a></p>
      </header>
      <section>
        <p class="tweet-text">メインスレッド側のメモリは「shared」オプションをつけて作成する。<br/><br/>const memory = new WebAssembly.Memory({initial:1,shared:true,maximum:1});<br/><br/>maximum指定をしないとエラーになる。SharedArrayBufferが内部で使われるようだね。<br/>#webassembly</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153754277640171520"
            target="_blank">2019/7/24 4:50:30</a></p>
      </header>
      <section>
        <p class="tweet-text">このメモリはpostMessageで送っても参照のみのコピーとなって、メインスレッドとオーディオ・ワークレットでインスタンス化したwasmと共有できるようになる。<br/><br/>#WebAssembly</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153754731916886017"
            target="_blank">2019/7/24 4:52:18</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずできることが分かったので、psgエミュレータを別のワーカーで動かすようにして、メインスレッド・AudioWorklet・ワーカー間で協調動作するようにコードを変えてみる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153755555699126272"
            target="_blank">2019/7/24 4:55:34</a></p>
      </header>
      <section>
        <p class="tweet-text">wabt.jsはドキュメント上には書いていないけれど、3つ目の引数としてfeaturesオプションがあって、ここで--enable-xxxxxを設定することができる。<br/><br/>wabt.parseWat(path,watText,features);<br/><br/>例えば--enable-threadsをしたくば<br/>features.threads = true<br/>みたくする。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153756020293791744"
            target="_blank">2019/7/24 4:57:25</a></p>
      </header>
      <section>
        <p class="tweet-text">wabt.jsのこの辺りのコードを読んで知った。<br/><br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/wabt/blob/master/demo/wat2wasm/demo.js#L27" target="_blank">wabt/demo.js at master · WebAssembly/wabt · GitHub</a></header><div>The WebAssembly Binary Toolkit. Contribute to WebAssembly/wabt development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153756447299125248"
            target="_blank">2019/7/24 4:59:07</a></p>
      </header>
      <section>
        <p class="tweet-text">今回はリングバッファにして、できる限りメモリをロックせず動かそうかなと思う。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153769588758200320"
            target="_blank">2019/7/24 5:51:20</a></p>
      </header>
      <section>
        <p class="tweet-text">昔と違ってマルチコアになってるので、それなりにスレッド使わないともったいないよね。。スレッドがコア別に分けられるかはよくわからんけどね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1153770023640416256"
            target="_blank">2019/7/24 5:53:04</a></p>
      </header>
      <section>
        <p class="tweet-text">１９８０年代後半のアーケード基板はオーディオ用にサブCPUを載せてたりしたから、それに倣う感じ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1155949507923730437"
            target="_blank">2019/7/30 6:13:33</a></p>
      </header>
      <section>
        <p class="tweet-text">実装スピードは夏バテもありものすごく落ちている。超絶ノロノロ状態だが、一日数行でもコードを書いてるのでいつかはできるだろう。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1155949770529050625"
            target="_blank">2019/7/30 6:14:36</a></p>
      </header>
      <section>
        <p class="tweet-text">仕事から帰るとヘトヘトで何もしたくなくなるんだよなあ。。この時期。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157421741255213057"
            target="_blank">2019/8/3 7:43:41</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやく実装を終え、デバッグのステータスに入った。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157443827306643457"
            target="_blank">2019/8/3 9:11:27</a></p>
      </header>
      <section>
        <p class="tweet-text">まだまともに動いてないのでなんなのだが、SharedArrayBufferは、webAssembly,web-worker,AudioWorklet,webgl,メインスレッド間で共有できることを理解した。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157444948150538240"
            target="_blank">2019/8/3 9:15:54</a></p>
      </header>
      <section>
        <p class="tweet-text">メインスレッドでWebAssembly.Memoryをshared=trueで作ると、そのメモリはコピーコストを伴わずwasm/webgl/worker/audioWorklet間で共有できる。これができるのは今のところchromeだけのようだけど。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157445851544866816"
            target="_blank">2019/8/3 9:19:29</a></p>
      </header>
      <section>
        <p class="tweet-text">共有メモリにはオペレーションの原子性を保証するメソッド群がAtomicsに定義されている。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157446164821659653"
            target="_blank">2019/8/3 9:20:44</a></p>
      </header>
      <section>
        <p class="tweet-text">このようなことがJSでできるようになってることはすごいことだね。今更だけど。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157539331914887168"
            target="_blank">2019/8/3 15:30:57</a></p>
      </header>
      <section>
        <p class="tweet-text">webAssemblyのステップトレースができるchromeもすごい。これがあるのでwatでコーディングするモチベーションを保つことができる。 https://t.co/YiEnMvTfSn</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EBBn4qtVUAAG7-_.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157587423838138370"
            target="_blank">2019/8/3 18:42:03</a></p>
      </header>
      <section>
        <p class="tweet-text">ウーム。問題発生。今やろうとしてるのは、<br/><br/>１．worker中のwasmでオーディオをレンダリング<br/>２．AudioWorkletでレンダリングしたオーディオデータを再生<br/><br/>で、このデータを受け渡しをSharedArrayBufferでやろうとしてる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157587425276788737"
            target="_blank">2019/8/3 18:42:03</a></p>
      </header>
      <section>
        <p class="tweet-text">もう少し細かくいうと<br/><br/>１．メインスレッドでWebAssembly.Memoryを共有モードで作成<br/>２．そのメモリをpostMessageでworkerとAudioWorkletに渡す<br/><br/>ことでメモリを共有して、そのメモリにデータをロード・ストアしてスレッド間のデータ受け渡しをしようとしてる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157589356351119361"
            target="_blank">2019/8/3 18:49:44</a></p>
      </header>
      <section>
        <p class="tweet-text">私はWebAssembly.Memoryを共有モード(shared :true)で作れば、postMessageで送っても内部的に作成されるSharedArrayBufferはクローンされずポインタのみ渡されると期待していたがそうではなかった。。クローンされてるようだ。どうもSharedArrayBufferそのものをpostMessageせんといかんようだ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157589831750307840"
            target="_blank">2019/8/3 18:51:37</a></p>
      </header>
      <section>
        <p class="tweet-text">WebAssembly.Memoryを生成するときにShareArrayBufferを指定できればよいのだけれど、それはないので、ちょっと工夫しなければならないね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157596230467215361"
            target="_blank">2019/8/3 19:17:03</a></p>
      </header>
      <section>
        <p class="tweet-text">WebAsssembly.MemoryにはbufferプロパティがあるのでこれをpostMessageすればよさそうだけど、そうするとworker側のwasmでメモリをインポートすることができんようになってしまうんだな。これが。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157596231733895169"
            target="_blank">2019/8/3 19:17:03</a></p>
      </header>
      <section>
        <p class="tweet-text">となると、<br/><br/>１．メインスレッド側は必要なメモリページ数を計算<br/>２．workerへ必要メモリページ数をpostMessage<br/>３．worker側でWebAssembly.Memoryを作成。メインスレッドへ内部SharedArrayBufferへの参照を返す。<br/>４．メインスレッドはその参照をAudioWorkletにpostMessage<br/><br/>みたいにすればいいかな？</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157596522516602882"
            target="_blank">2019/8/3 19:18:12</a></p>
      </header>
      <section>
        <p class="tweet-text">しかし現状のレベルではWebAssembly.Memory自体をスレッド間(worker/メインスレッド）で共有できんのですな。これはちと痛いですな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157622709901094912"
            target="_blank">2019/8/3 21:02:16</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしこのサンプルを見ると、WebAssembly.Memoryはスレッド間で共有できてる風なんだけどなあ。ひょっとして何か凡ミスしてるかもしれん。。<br/><br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/threads/blob/master/proposals/threads/Overview.md#example" target="_blank">threads/Overview.md at master · WebAssembly/threads · GitHub</a></header><div>Threads and Atomics in WebAssembly. Contribute to WebAssembly/threads development by creating an account on GitHub.</div></blockquote> https://t.co/WxuGvcjpGS</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EBCzt7cU0AEO605.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157622836153835520"
            target="_blank">2019/8/3 21:02:46</a></p>
      </header>
      <section>
        <p class="tweet-text">まあこのコード見たから「いける！」と思ったんだった。そういえば。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157844392184410113"
            target="_blank">2019/8/4 11:43:09</a></p>
      </header>
      <section>
        <p class="tweet-text">どうも私の凡ミスっぽい。WebAssembly.Memoryはshared=trueにすればスレッド間で共有できるのは間違いないようだ。そりゃそうか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1157844585445351424"
            target="_blank">2019/8/4 11:43:55</a></p>
      </header>
      <section>
        <p class="tweet-text">私のwasm関数がおかしな動きしてるだけというオチ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1158126210724950016"
            target="_blank">2019/8/5 6:23:00</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずメモリが共有できてることだけは確認できた。が、まだ動いてない。。しょうもないバグだった。しかしまあ、サンドボックス環境（安全性がそこそこ担保された環境）でリニアメモリを各スレッド間で共有して自由にアクセスできるのはちょっとうれしいね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1158126680185004033"
            target="_blank">2019/8/5 6:24:52</a></p>
      </header>
      <section>
        <p class="tweet-text">PSGエミュレータのworker改造版が動けば、いよいよオリジナル？の波形メモリ音源をWebAssemblyベースで作って先に進めるとしよう。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1158509143692664832"
            target="_blank">2019/8/6 7:44:38</a></p>
      </header>
      <section>
        <p class="tweet-text">うーむ。音が鳴らんなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1159554488836845568"
            target="_blank">2019/8/9 4:58:28</a></p>
      </header>
      <section>
        <p class="tweet-text">Bugを追い込んでるが、凡ミス部分がなかなか発見できん。。いうても1日１時間もいじってないけど。。モチベーション低下中。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1159554673134538752"
            target="_blank">2019/8/9 4:59:12</a></p>
      </header>
      <section>
        <p class="tweet-text">なんかこう、workerのデバッグってやりにくいなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160097084391002114"
            target="_blank">2019/8/10 16:54:33</a></p>
      </header>
      <section>
        <p class="tweet-text">いやぁ。ようやく音が鳴るようになったなあ。workerの中で25msのsetTimeoutだとタイマーの間隔が短すぎるようだ。100msくらいにしないとまともに音が鳴らないわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160283624756826112"
            target="_blank">2019/8/11 5:15:47</a></p>
      </header>
      <section>
        <p class="tweet-text">と思ったけどBugを見つけた。25msくらいでも行けるようになったなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160291813799809024"
            target="_blank">2019/8/11 5:48:20</a></p>
      </header>
      <section>
        <p class="tweet-text">現状の成果物はこんな感じ。<br/><div class="youtube" data-type="yt" id="0lZG8uHOOD8"><div class="yt-title">Youtube - WebWorker+AudioWorklet+WebAssemblyでPSGをエミュレーションする</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/0lZG8uHOOD8" class="youtube" src="https://i.ytimg.com/vi/0lZG8uHOOD8/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160292027147227136"
            target="_blank">2019/8/11 5:49:11</a></p>
      </header>
      <section>
        <p class="tweet-text">これが一応私の環境で動いてるやつ。。<br/>Chromeしか動きませんが。。<br/><br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.sfpgmr.net/sandbox/psg/releases/20190811/" target="_blank">WASMでPSG Emulatorを作る</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160293696274718720"
            target="_blank">2019/8/11 5:55:49</a></p>
      </header>
      <section>
        <p class="tweet-text">えらい時間がかかってしまったなあ。。<br/>しかしこれで技術的なめどはついたので、いよいよ波形メモリ音源をwasmで作るとするか。。バグを潰してる間もどうしようかいろいろ考えたんだよねえ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160294514344386560"
            target="_blank">2019/8/11 5:59:04</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリ＋EG＋フィルタだよな。やっぱり。ちゅうことでSCC+SIDみたいなやつでいこうかなと。とりあえずそれで設計しつつ実装すると。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160294826962587648"
            target="_blank">2019/8/11 6:00:18</a></p>
      </header>
      <section>
        <p class="tweet-text">あとはシーケンサかあ。MML書けるようにするかそれともStandard MIDIをそのまま再生できるようにするか。。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160295488047865857"
            target="_blank">2019/8/11 6:02:56</a></p>
      </header>
      <section>
        <p class="tweet-text">私REAPERというDAWを使ってるので、JS Pluginで同じ仕様の音源を作って、REAPERで作曲してそのデータを再生するようにしようかなとも思ってる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160297793879080960"
            target="_blank">2019/8/11 6:12:06</a></p>
      </header>
      <section>
        <p class="tweet-text">そういえば思い出したのが、WebAudio APIを使ってモジュラータイプのやつを途中までつくってたんだっけ。。ステップシーケンサー作ってる途中でやる気なくしたんだよな。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="http://github.sfpgmr.net/webaudiomodular/dist/" target="_blank"></a></header><div></div></blockquote> https://t.co/0qxAPewFLs</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EBo0sSYUwAArnVG.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160297799163895808"
            target="_blank">2019/8/11 6:12:07</a></p>
      </header>
      <section>
        <p class="tweet-text">レコポっぽいシーケンス・エディタを志向しててそれなりにできてた気もするけどなあ。。 https://t.co/kxJeodX2IX</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EBo0sqhUIAAZrJy.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160298011475374080"
            target="_blank">2019/8/11 6:12:57</a></p>
      </header>
      <section>
        <p class="tweet-text">これ改造してエディタ＋シーケンサを作れんかな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160332579142115329"
            target="_blank">2019/8/11 8:30:19</a></p>
      </header>
      <section>
        <p class="tweet-text">まあでもあれかあ、REAPERでやってみるかあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160652688285208577"
            target="_blank">2019/8/12 5:42:19</a></p>
      </header>
      <section>
        <p class="tweet-text">前作って放置したWebAudioのやつを動画にしてみた。エディタはレコポのコマンドのまんまにしようとしてたみたいね。。<br/><div class="youtube" data-type="yt" id="gRe3l-SfmAI"><div class="yt-title">Youtube - Web Audio Moduler</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/gRe3l-SfmAI" class="youtube" src="https://i.ytimg.com/vi/gRe3l-SfmAI/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160669585432932352"
            target="_blank">2019/8/12 6:49:28</a></p>
      </header>
      <section>
        <p class="tweet-text">これはなかなかいいね。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.a1k0n.net/2015/11/09/javascript-ft2-player.html" target="_blank">Playing Fasttracker 2 .XM files in Javascript – a1k0n.net</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160669639589781504"
            target="_blank">2019/8/12 6:49:40</a></p>
      </header>
      <section>
        <p class="tweet-text"><blockquote class="card card-default"><header><img  src="https://avatars0.githubusercontent.com/u/46170?s=400&v=4" /><a href="https://github.com/a1k0n/jsxm/" target="_blank">GitHub - a1k0n/jsxm: FastTracker 2 .xm module player in Javascript</a></header><div>FastTracker 2 .xm module player in Javascript. Contribute to a1k0n/jsxm development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160674118301175809"
            target="_blank">2019/8/12 7:07:28</a></p>
      </header>
      <section>
        <p class="tweet-text">おぉ。これはFastTracker IIのクローンか。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://16-bits.org/ft2.php" target="_blank">16-bits.org - home of 8bitbubsy</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160681235452067840"
            target="_blank">2019/8/12 7:35:45</a></p>
      </header>
      <section>
        <p class="tweet-text">うーむ。。。いいね。。<br/><blockquote class="card card-default"><header><img  src="http://www.wothke.ch/websid/screenshot_2.gif" /><a href="https://www.wothke.ch/websid/" target="_blank">WebSid - the first HTML5/JavaScript C64 music player</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1160686596946927616"
            target="_blank">2019/8/12 7:57:03</a></p>
      </header>
      <section>
        <p class="tweet-text">SID界隈のソースをじっくり読もうかのう。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1162505901674131456"
            target="_blank">2019/8/17 8:26:19</a></p>
      </header>
      <section>
        <p class="tweet-text">帰省中も少し音源のことを考えた結果、音源作る前にシーケンサーのコードをwasmで書こうかなと思った。それでPSGを演奏してみようかなと。MMLっぽい言語のパーサもついでにpegで書いて、それをメモリに落とすコンパイラを作り、シーケンサーに渡して演奏させるようにするつもり。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1162867881383624705"
            target="_blank">2019/8/18 8:24:42</a></p>
      </header>
      <section>
        <p class="tweet-text">と思ったがやっぱりまずは波形メモリ音源を先に作ろうと思う。。どっちやねん。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1163412494053867520"
            target="_blank">2019/8/19 20:28:48</a></p>
      </header>
      <section>
        <p class="tweet-text">そういうわけで先ずはEGから作り始めている。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1163922177009188864"
            target="_blank">2019/8/21 6:14:06</a></p>
      </header>
      <section>
        <p class="tweet-text">コツコツmwasm(自作プリプロセッサ)でEQを実装中。もうちょっとでできる。<br/>だいぶwatでの実装も慣れてきた感じ。S式ってシンプルでいいなあ。。 https://t.co/JbmXjRRuul</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ECcVDO7UIAAMk-T.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1163922313227563008"
            target="_blank">2019/8/21 6:14:38</a></p>
      </header>
      <section>
        <p class="tweet-text">EQじゃなくてEGだった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1163922891387199488"
            target="_blank">2019/8/21 6:16:56</a></p>
      </header>
      <section>
        <p class="tweet-text">EGを作る<br/>↓<br/>WaveTable部分を作る<br/>↓<br/>一度音を鳴らしてみる<br/>↓<br/>LFOを作る<br/>↓<br/>フィルタを作る<br/><br/>の順番で作っていくつもり。AudioWorklet+Workerで処理が間に合うかはよくわからんね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1164657525364412416"
            target="_blank">2019/8/23 6:56:06</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずEG出来た。。<br/><blockquote class="card card-default"><header><img  src="https://avatars0.githubusercontent.com/u/3806814?s=400&v=4" /><a href="https://github.com/sfpgmr/sandbox/blob/master/wpsg/current/src/wasm/wpsg.mwat" target="_blank">sandbox/wpsg.mwat at master · sfpgmr/sandbox · GitHub</a></header><div>JS,WebGL,three.jsをいじるためのレポジトリ. Contribute to sfpgmr/sandbox development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165000955173036033"
            target="_blank">2019/8/24 5:40:47</a></p>
      </header>
      <section>
        <p class="tweet-text">さて次は波形テーブル部分を作るとしますかな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165004085877018624"
            target="_blank">2019/8/24 5:53:13</a></p>
      </header>
      <section>
        <p class="tweet-text">実のところEnvelope Genetator（EG）もADSRのそれぞれのフェーズへの移行を直線的、つまり一次関数で実装する分には楽なのだが、アナログ・シンセのEGをまねるとなると結構面倒くさくてですな。。<br/><blockquote class="card card-default"><header><img  src="https://www.g200kg.com/image/dtm.png" /><a href="https://www.g200kg.com/jp/docs/makingvst/07adsr.html" target="_blank">VSTiの作り方 - 7.おまけ (ADSRの実装) | g200kg Music & Software</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165004087319908352"
            target="_blank">2019/8/24 5:53:13</a></p>
      </header>
      <section>
        <p class="tweet-text">私のEGはもれなくいい加減なやつなんですな。つまり直線的なやつですわ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165006542959022080"
            target="_blank">2019/8/24 6:02:59</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリもなんちゅうか、エイリアシングノイズが発生するという問題があるので、それをできるだけ抑えてきれいな波形を出すとなると周波数帯域に応じた複数の波形データを用意する必要があったりして、凝りだすと止まらんわけですな。マルチ・サンプルとか言ったりもしますわな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165006544439672834"
            target="_blank">2019/8/24 6:02:59</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしそれは楽器としての話で、例えば古いサウンド・チップなんかはコストがかかる話なので、エイリアシング・ノイズは承知の上で割り切ったりしてるんですな。例えばSCCなんかは８ビット×32サンプルで発声可能なすべての音域をカバーするもんね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165007534274408448"
            target="_blank">2019/8/24 6:06:55</a></p>
      </header>
      <section>
        <p class="tweet-text">ということで我々はシステムに起因するノイズが含まれた音を聞くことになるのだけど、そのノイズが聴感上耳障りなのかどうかというのはまた別の話なんですな。そこに独特の味や良さを感じるひとたちもいるわけで。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165007535796969472"
            target="_blank">2019/8/24 6:06:55</a></p>
      </header>
      <section>
        <p class="tweet-text">SCC・PSGはさらにピッチ・コントロールに制約があるのでちょっと音痴になったりするんだけど、それに違和感を感じる人もいれば、感じない人もいるわけで。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165008430152609793"
            target="_blank">2019/8/24 6:10:29</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリというのはオシレータの一種なわけで。オシレータもいろいろな作り方があるんだよな。例えば計算によってサイン波・矩形波・のこぎり波などの周期波形を出力する方法もある。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165009924474064896"
            target="_blank">2019/8/24 6:16:25</a></p>
      </header>
      <section>
        <p class="tweet-text">リアルタイムに計算によって波形出力するのは昔はコストが高かったので、あらかじめメモリに波形情報を保存しておいて、それを読み出すことによって波形合成する方式がまず普及したんですな。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165011059184263170"
            target="_blank">2019/8/24 6:20:56</a></p>
      </header>
      <section>
        <p class="tweet-text">BLITなんかも昔調べたよなあ。。<br/><blockquote class="card card-default"><header><img  src="https://www.g200kg.com/image/dtm.png" /><a href="https://www.g200kg.com/jp/docs/makingvst/08blit.html" target="_blank">VSTiの作り方 - 8.おまけ (BLITのお話) | g200kg Music & Software</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165011811998953473"
            target="_blank">2019/8/24 6:23:55</a></p>
      </header>
      <section>
        <p class="tweet-text">サンプリング周波数変換なんかも結構奥が深くてですな。やっぱりノイズを含む問題があって、それを抑えるためのテクニックがあるんですわ。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://ja.wikipedia.org/wiki/%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AA%E3%83%B3%E3%82%B0%E5%91%A8%E6%B3%A2%E6%95%B0%E5%A4%89%E6%8F%9B" target="_blank">サンプリング周波数変換 - Wikipedia</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165012130141110272"
            target="_blank">2019/8/24 6:25:11</a></p>
      </header>
      <section>
        <p class="tweet-text">サンプリング周波数変換だけで一冊の本になってしまうくらいですからな。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://amzn.to/2ZcRbdx" target="_blank">マルチレート信号処理―レート変換とマルチレートフィルタ | 高橋 宣明, 武部 幹 |本 | 通販 | Amazon</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165013756922888192"
            target="_blank">2019/8/24 6:31:39</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっと内部的なサンプリングレートを24KHz固定にしようかなぁと考えててね。いまどきのPCはオーディオのサンプリングレートは可変で、それに合わせて内部処理してもいいんだけど、高周波数になるとちょっと処理的にきつそうだし、Lo-Fiな音で十分だという気持ちもある。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1165013758114033664"
            target="_blank">2019/8/24 6:31:39</a></p>
      </header>
      <section>
        <p class="tweet-text">そうはいってもPCの方は再生サンプリング周波数は可変だから、もし内部の周波数を固定にするとレート変換をやらなくてはいけなくなるんだな。でも私のPCだと96KHzくらいでも処理できたりできてるけどね。。さて、どうするか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1166458356770361344"
            target="_blank">2019/8/28 6:11:58</a></p>
      </header>
      <section>
        <p class="tweet-text">WaveTableの実装はとりあえず終わり。これからテストに入る。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1166458610299232256"
            target="_blank">2019/8/28 6:12:59</a></p>
      </header>
      <section>
        <p class="tweet-text">テスト用の音源＆UIを作って鳴らしてみる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167170775238901760"
            target="_blank">2019/8/30 5:22:52</a></p>
      </header>
      <section>
        <p class="tweet-text">このwasmのデバッガはありがたい。スタックやメモリの内容、ローカル変数の値が見れるしね。S式でソースを書いてるのでフラットモードを追うのはちと面倒だけど。。 https://t.co/QNW2PlC26Y</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EDKfogKUEAARjP_.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167171367617232898"
            target="_blank">2019/8/30 5:25:13</a></p>
      </header>
      <section>
        <p class="tweet-text">wasmで書いた波形メモリのオシレータはようやく動くようになった。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167590909325631488"
            target="_blank">2019/8/31 9:12:20</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリ音源の体裁を整える作業を実施中。コンピュータはメモリへのロード・ストアがいかに多いかがwasmを直接書いてみると実感できる。しかもS式で書きなれてきて、スタックが今どんな状態か頭で想像できるようになってきたわ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167590910613311488"
            target="_blank">2019/8/31 9:12:20</a></p>
      </header>
      <section>
        <p class="tweet-text">平行してデジタル・フィルタのコードを物色中。とりあえずはMAMEのSIDのコードを参考にwasmで書こうかなと思っているけど、やっぱりフィルタは重い処理だね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167591324150714369"
            target="_blank">2019/8/31 9:13:59</a></p>
      </header>
      <section>
        <p class="tweet-text">Worker自体で処理するよりは、コードをGLSLで書いてGPUにさせたほうがいいかもしれんな。まあ書いてみんとわからんけど。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1167591965266890752"
            target="_blank">2019/8/31 9:16:31</a></p>
      </header>
      <section>
        <p class="tweet-text">RolandのVSCも最初はフィルタなしだったもんなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169005180777619462"
            target="_blank">2019/9/4 6:52:08</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリシンセとして動くコードをwasmで書いてるが、call_indiectの書き方でハマり中。。wabt.jsからよくわからないエラーが出てコンパイルできんのですわ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169005858015076352"
            target="_blank">2019/9/4 6:54:50</a></p>
      </header>
      <section>
        <p class="tweet-text">仕様だけで書き方がわからない時は、wasmのテストコードを読んだりしてる。。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/spec/blob/master/test/core/call_indirect.wast" target="_blank">spec/call_indirect.wast at master · WebAssembly/spec · GitHub</a></header><div>WebAssembly specification, reference interpreter, and test suite. - WebAssembly/spec</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169011765222531072"
            target="_blank">2019/9/4 7:18:18</a></p>
      </header>
      <section>
        <p class="tweet-text">(table funcref<br/>          ...<br/>ん、funcref ? なんだこれ。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/spec/blob/master/test/core/call_indirect.wast#L43" target="_blank">spec/call_indirect.wast at master · WebAssembly/spec · GitHub</a></header><div>WebAssembly specification, reference interpreter, and test suite. - WebAssembly/spec</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169012873093423107"
            target="_blank">2019/9/4 7:22:42</a></p>
      </header>
      <section>
        <p class="tweet-text">これか。。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/reference-types/blob/master/proposals/reference-types/Overview.md" target="_blank">reference-types/Overview.md at master · WebAssembly/reference-types · GitHub</a></header><div>Proposal for adding basic reference types (anyref) - WebAssembly/reference-types</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169014281867878401"
            target="_blank">2019/9/4 7:28:18</a></p>
      </header>
      <section>
        <p class="tweet-text">anyfunc から funcrefに変わっとるのね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169014551980978178"
            target="_blank">2019/9/4 7:29:23</a></p>
      </header>
      <section>
        <p class="tweet-text">仕様もそうなっとるな。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://webassembly.github.io/spec/core/bikeshed/index.html#table-types%E2%91%A0" target="_blank">WebAssembly Core Specification</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169347634621906944"
            target="_blank">2019/9/5 5:32:56</a></p>
      </header>
      <section>
        <p class="tweet-text">それはそれとして、元々の問題は凡ミスだった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169353837582307329"
            target="_blank">2019/9/5 5:57:35</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリ音源の実装のめどがつきそうな感じになってきたな。。音が鳴ったらフィルタを作って終わりにしよう。演奏部分（シーケンサ）も作らんといかんしな。。年内にゲームシステムが完成するか微妙になってきたね。もう9月だもんね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169354039126970368"
            target="_blank">2019/9/5 5:58:23</a></p>
      </header>
      <section>
        <p class="tweet-text">ゲーム・システムが完成したらようやくゲームつくりに入れるからなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169355003569397762"
            target="_blank">2019/9/5 6:02:13</a></p>
      </header>
      <section>
        <p class="tweet-text">プログラミングにかける時間は平日は多くて１時間、休日は２－３時間くらいだからなかなか進まんよなあ。。それくらいしか集中力が続かんのよねぇ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1169355197031665664"
            target="_blank">2019/9/5 6:02:59</a></p>
      </header>
      <section>
        <p class="tweet-text">もちろん趣味のプログラミングに割く時間だけだけどね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170454686991695873"
            target="_blank">2019/9/8 6:51:58</a></p>
      </header>
      <section>
        <p class="tweet-text">ぼちぼちテスト＆バグつぶしをやってる。あれれ、memory.grow でエラー出るなあ。。 https://t.co/rFhbOcuVBc</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ED5KVWqU0AE74cG.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170472292716969984"
            target="_blank">2019/9/8 8:01:55</a></p>
      </header>
      <section>
        <p class="tweet-text">うーむ。JS側でgrowしてもアウトですな。。 https://t.co/b98pbNl8Cr</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ED5aWIzU8AEsQRw.png" />
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ED5aWIzUcAAgb8D.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170472550247174144"
            target="_blank">2019/9/8 8:02:56</a></p>
      </header>
      <section>
        <p class="tweet-text">shared arraybufferだとダメなのかな。。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170473583975337985"
            target="_blank">2019/9/8 8:07:03</a></p>
      </header>
      <section>
        <p class="tweet-text">普通のmemoryだといけるな。。やっぱりsharedだとmemory.growできん仕様なのかな。。 https://t.co/F5xHT3nT1g</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ED5bhTsUcAA051s.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170474864416677888"
            target="_blank">2019/9/8 8:12:08</a></p>
      </header>
      <section>
        <p class="tweet-text">これはちょっと行き詰った感ありですな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170491233841496065"
            target="_blank">2019/9/8 9:17:11</a></p>
      </header>
      <section>
        <p class="tweet-text">しかしまあ特別shared memoryだからといってmemory.growがfailするとは書いてないからなあ。。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/threads/blob/master/proposals/threads/Overview.md#resizing" target="_blank">threads/Overview.md at master · WebAssembly/threads · GitHub</a></header><div>Threads and Atomics in WebAssembly. Contribute to WebAssembly/threads development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170491529795796992"
            target="_blank">2019/9/8 9:18:22</a></p>
      </header>
      <section>
        <p class="tweet-text">「grow_memory of a shared linear memory is allowed.」だもんねぇ・・。 <br/><br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/threads/blob/master/proposals/threads/Overview.md#resizing" target="_blank">threads/Overview.md at master · WebAssembly/threads · GitHub</a></header><div>Threads and Atomics in WebAssembly. Contribute to WebAssembly/threads development by creating an account on GitHub.</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170657982259986432"
            target="_blank">2019/9/8 20:19:47</a></p>
      </header>
      <section>
        <p class="tweet-text">どうもこのBugっぽいねぇ。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://bugs.chromium.org/p/v8/issues/detail?id=8564" target="_blank">8564 - Loading issue... - Monorail</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170660340662554624"
            target="_blank">2019/9/8 20:29:09</a></p>
      </header>
      <section>
        <p class="tweet-text">このBugはまだ解消されてない模様。というかIssue9380のためにブロックされているようだ。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://bugs.chromium.org/p/v8/issues/detail?id=9380" target="_blank">9380 - Loading issue... - Monorail</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170660637384404993"
            target="_blank">2019/9/8 20:30:20</a></p>
      </header>
      <section>
        <p class="tweet-text">ちょっと待ちかあ。初期アロケートメモリを大きくしてテストを続けるかな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1170663700740460545"
            target="_blank">2019/9/8 20:42:30</a></p>
      </header>
      <section>
        <p class="tweet-text">そういえばガベコレも動かせるようになったんだよな。。 https://t.co/KIowNFTnbx</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/ED8IbgXU0AIuCax.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171276691236278272"
            target="_blank">2019/9/10 13:18:19</a></p>
      </header>
      <section>
        <p class="tweet-text">おっと、自作プリプロセッサのバグを発見。修正せねばいかんな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171531887803682819"
            target="_blank">2019/9/11 6:12:22</a></p>
      </header>
      <section>
        <p class="tweet-text">プリプロセッサのバグを取り終え、波形メモリ音源プロトタイプのテスト＆バグつぶしを再開。まだちゃんと動いてはいない。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171532132906176515"
            target="_blank">2019/9/11 6:13:21</a></p>
      </header>
      <section>
        <p class="tweet-text">プリプロセッサもS式を崩さないように構文設計すればよかったかなあと思ったりするな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171541923468726272"
            target="_blank">2019/9/11 6:52:15</a></p>
      </header>
      <section>
        <p class="tweet-text">今のところ、フィルタなし、波形メモリによるオシレータ、ピッチLFO/EG、アンプLFO/EGという構成になってる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171542425795317761"
            target="_blank">2019/9/11 6:54:15</a></p>
      </header>
      <section>
        <p class="tweet-text">WSGやSCCの時代はチップとソフトウェアでこれくらいのスペックを実現してると思う。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171545591630852097"
            target="_blank">2019/9/11 7:06:49</a></p>
      </header>
      <section>
        <p class="tweet-text">MOD界隈でもなかなかデジタルフィルタをソフトウェアかつリアルタイムで動かすことはできなかった。そこは長い間DSPが担う部分だったんだよな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171889152444395521"
            target="_blank">2019/9/12 5:52:01</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえず実行すると何らかの波形出力が得られるようになった。これからUIと簡易シーケンサを作って実際に鳴らしてみるとするか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1171891505616715776"
            target="_blank">2019/9/12 6:01:22</a></p>
      </header>
      <section>
        <p class="tweet-text">PSGエミュレータに比べてパラメータが圧倒的に増えたんでちょっと面倒なんだよねえ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172258042546540544"
            target="_blank">2019/9/13 6:17:51</a></p>
      </header>
      <section>
        <p class="tweet-text">先にフィルタを実装してみることにした。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172258144887590912"
            target="_blank">2019/9/13 6:18:15</a></p>
      </header>
      <section>
        <p class="tweet-text">このコードを参考にして。。<br/><blockquote class="card card-default"><header><img  src="http://vstcpp.wpblog.jp/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png" /><a href="http://vstcpp.wpblog.jp/?page_id=728" target="_blank">簡単なデジタルフィルタのサンプルコード | C++でVST作り</a></header><div>簡単なデジタルフィルタの実装についてで説明したフィルタのサンプルコードです。 「Z変換」や「伝達関数」といった高度な数学を極力使わずに実装するフィルタのサンプルコードです。 「簡単なデジタルフィルタの実装について」も合わせてお読みください。</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172462433060868096"
            target="_blank">2019/9/13 19:50:01</a></p>
      </header>
      <section>
        <p class="tweet-text">フィルタ実装は今半分くらい進んでいる。サンプルコードがすごくわかりやすくてbiquadフィルタの理解も少しは高まった気がしないでもない。しかし原理の理解は浅い。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172462434524622848"
            target="_blank">2019/9/13 19:50:02</a></p>
      </header>
      <section>
        <p class="tweet-text">離散数値で構成されるデジタルの音の世界では、ある「一定期間の音声データの平均をとること」≒「ローパスフィルタをかける」ことということは感覚的に理解している。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172462956275060736"
            target="_blank">2019/9/13 19:52:06</a></p>
      </header>
      <section>
        <p class="tweet-text">がそれ以上はよくわからない。よくわからないがしかしフィルタのコード自体はいたって簡単である。がしかしなぜこれでLPFやHPFになったりするのかがよくわからんのであった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172485719576592385"
            target="_blank">2019/9/13 21:22:33</a></p>
      </header>
      <section>
        <p class="tweet-text"><blockquote class="card card-default"><header><img  src="https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" /><a href="https://qiita.com/bellbind/items/2619f8b71c3a69cc28be#v8---wasm-math-intrinsics" target="_blank">2019年のWebAssembly事情 - Qiita</a></header><div>2年前に、[「(Learn the Hard Way)nodejs-8でのWebAssembly自体を調べてみた」](https://qiita.com/bellbind/items/a6435b0c8f10306128b8)として、...</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172486574140841984"
            target="_blank">2019/9/13 21:25:57</a></p>
      </header>
      <section>
        <p class="tweet-text">v8では--wasm-math-intrinsicsが使えるのであった。。これでsin/cosの呼び出しコストが抑えられるのでjsのMathを利用することにした。新たにsin/cosを作るのはとりあえずやめておこう。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1172741018682183680"
            target="_blank">2019/9/14 14:17:01</a></p>
      </header>
      <section>
        <p class="tweet-text">下のサンプルコードをwasmに書き換えた。このフィルタを使えるように波形メモリシンセの修正にこれから入ろうと思う。その前に耳鼻科に行かんとね。。<br/><blockquote class="card card-default"><header><img  src="http://vstcpp.wpblog.jp/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png" /><a href="http://vstcpp.wpblog.jp/?page_id=728" target="_blank">簡単なデジタルフィルタのサンプルコード | C++でVST作り</a></header><div>簡単なデジタルフィルタの実装についてで説明したフィルタのサンプルコードです。 「Z変換」や「伝達関数」といった高度な数学を極力使わずに実装するフィルタのサンプルコードです。 「簡単なデジタルフィルタの実装について」も合わせてお読みください。</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1173568714802774016"
            target="_blank">2019/9/16 21:06:00</a></p>
      </header>
      <section>
        <p class="tweet-text">うーむ。思ったほど進捗できず。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1173568972790231040"
            target="_blank">2019/9/16 21:07:01</a></p>
      </header>
      <section>
        <p class="tweet-text">まあしかし少しずつでも進めればいつかはできるからね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174059438660976640"
            target="_blank">2019/9/18 5:35:57</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやく音が鳴り、UI作りに入る。UIができたら各パラメータをいじって所望の動きになっているかテストする。 https://t.co/6EARekLIJd</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EEsY1gNU8AEnul2.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174059440472907776"
            target="_blank">2019/9/18 5:35:58</a></p>
      </header>
      <section>
        <p class="tweet-text">まだしかし音源としては機能が足りてないので、そこは追加実装しなくてはならない。さて、この音源使い物にはたしてなるのか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174082266340806656"
            target="_blank">2019/9/18 7:06:40</a></p>
      </header>
      <section>
        <p class="tweet-text">まず、波形テーブルの編集部分から作り始めるとするか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174433611019255808"
            target="_blank">2019/9/19 6:22:47</a></p>
      </header>
      <section>
        <p class="tweet-text">そういうことで作成中。数式で波形を生成する機能+ハンド・ドローイングで波形をエディットすることにしてみた。 https://t.co/qHxEAfX5h3</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EExtJNoUEAA9f99.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174433912061218817"
            target="_blank">2019/9/19 6:23:59</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリのサンプル数が512だとやっぱり綺麗だな。。 https://t.co/38VKWy2ChD</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EExtavJU0AAj0j8.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174434140369776640"
            target="_blank">2019/9/19 6:24:53</a></p>
      </header>
      <section>
        <p class="tweet-text">サンプル数が16だとレトロな感じ。。 https://t.co/85BrpIejqi</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EExtoBwVAAAnpiN.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174517525993754624"
            target="_blank">2019/9/19 11:56:14</a></p>
      </header>
      <section>
        <p class="tweet-text">これを波形メモリに直接反映して結果をすぐ確認できるようにするつもり。波形メモリは共有メモリに格納してるのでこの辺は簡単かと。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174518087929880576"
            target="_blank">2019/9/19 11:58:28</a></p>
      </header>
      <section>
        <p class="tweet-text">式で波形生成できるようにしてみたがこれが結構面白くてちょっとハマってる。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174645801059905536"
            target="_blank">2019/9/19 20:25:57</a></p>
      </header>
      <section>
        <p class="tweet-text">FM変調風 https://t.co/O1EwWWh3ni</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0uITJUEAAHbhQ.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174647840141824000"
            target="_blank">2019/9/19 20:34:03</a></p>
      </header>
      <section>
        <p class="tweet-text">フーリエ級数による矩形波。ギブス現象が出とる。。 https://t.co/I6lfmzOsen</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0v_AEUEAAPmH8.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174648435099590657"
            target="_blank">2019/9/19 20:36:25</a></p>
      </header>
      <section>
        <p class="tweet-text">級数の数を増やすとほほほぼ矩形波になるな。。 https://t.co/8BhpQJeG9p</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0whocVAAED5Gu.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174648963850371073"
            target="_blank">2019/9/19 20:38:31</a></p>
      </header>
      <section>
        <p class="tweet-text">矩形波はこんな式でもいけるけどね。。 https://t.co/DbBAkxdWzu</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0xAZrUEAAua3e.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174649336602324992"
            target="_blank">2019/9/19 20:40:00</a></p>
      </header>
      <section>
        <p class="tweet-text">鋸波 https://t.co/saMexy7ELA</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0xWG4UUAAu8lr.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174650100708020224"
            target="_blank">2019/9/19 20:43:02</a></p>
      </header>
      <section>
        <p class="tweet-text">三角波 https://t.co/zqRhaIphHW</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE0yCmHUEAAHO0p.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174654890607464449"
            target="_blank">2019/9/19 21:02:04</a></p>
      </header>
      <section>
        <p class="tweet-text">フーリエ級数による鋸波<br/>やはり項が有限だとギブス現象が出ますな。。 https://t.co/nHI34guVx6</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EE02ZYhUwAEMIXk.png" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174655382184026113"
            target="_blank">2019/9/19 21:04:01</a></p>
      </header>
      <section>
        <p class="tweet-text">多分正弦波の和ですべての波形は表現できるんだろうなあ。フーリエさんちゅうのはすごいですなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174656753994096641"
            target="_blank">2019/9/19 21:09:28</a></p>
      </header>
      <section>
        <p class="tweet-text">FMは簡単な実装で複雑な波形を作ることができる。しかもEGだけでフィルタを使わずに含まれる周波数の成分を変えることができるという。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174657380119805954"
            target="_blank">2019/9/19 21:11:58</a></p>
      </header>
      <section>
        <p class="tweet-text">原理は簡単なんでチップも安価に作ることができるし、PSGに比べてその音色の豊かさは比較にならない。しかも従来のシンセでは出ない音も出すことができたという。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1174657724824449025"
            target="_blank">2019/9/19 21:13:20</a></p>
      </header>
      <section>
        <p class="tweet-text">FM音源を開発したヤマハ社にはリスペクトしかないですな。おかげでゲーム音楽がリッチになったもんな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175150012973469696"
            target="_blank">2019/9/21 5:49:30</a></p>
      </header>
      <section>
        <p class="tweet-text">波形エディタがようやく動くようになったので動画にしてみた。<br/><div class="youtube" data-type="yt" id="E75XPqH8lwA"><div class="yt-title">Youtube - 波形メモリ音源の制作ー波形メモリエディタ</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/E75XPqH8lwA" class="youtube" src="https://i.ytimg.com/vi/E75XPqH8lwA/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175155956851736576"
            target="_blank">2019/9/21 6:13:08</a></p>
      </header>
      <section>
        <p class="tweet-text">WebAssembly.MemoryのbufferがSharedArrayBufferのときgrowできんというBugどうやらFixした模様ですな。。<br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://bugs.chromium.org/p/v8/issues/detail?id=8564#c24" target="_blank">8564 - Loading issue... - Monorail</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175156451234344960"
            target="_blank">2019/9/21 6:15:05</a></p>
      </header>
      <section>
        <p class="tweet-text">これがいつChromeに反映されるかだが。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175158504992034816"
            target="_blank">2019/9/21 6:23:15</a></p>
      </header>
      <section>
        <p class="tweet-text">波形メモリの編集部分がそこそこできたので、音色(Timbre)エディタ部分を作ろうかなと思う。EGやフィルタ・パラメータをいじる部分。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175948878727675905"
            target="_blank">2019/9/23 10:43:55</a></p>
      </header>
      <section>
        <p class="tweet-text">音色エディタを作成中。ようやく音量のEGとLFOがエディットできるようになった。<br/><br/><div class="youtube" data-type="yt" id="mEZLKw8mEA8"><div class="yt-title">Youtube - 波形メモリ音源の制作ー音色エディタ</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/mEZLKw8mEA8" class="youtube" src="https://i.ytimg.com/vi/mEZLKw8mEA8/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1175949594703720448"
            target="_blank">2019/9/23 10:46:46</a></p>
      </header>
      <section>
        <p class="tweet-text">年内に所望のゲーム・システムはできるだろうか。やばくなってきたな。。その上に載るゲームのアイデアもモヤっとしとるがな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176059088444067845"
            target="_blank">2019/9/23 18:01:51</a></p>
      </header>
      <section>
        <p class="tweet-text">フィルタのUI作成中。ああ、面倒くさい。。 https://t.co/nzhIOhNolg</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EFIzgb_UYAA2JXz.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176259841645432832"
            target="_blank">2019/9/24 7:19:34</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずフィルタのパラメータいじるとこまでUIコードを書いたがうんともすんともいわない状態。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176603696580329474"
            target="_blank">2019/9/25 6:05:56</a></p>
      </header>
      <section>
        <p class="tweet-text">ようやくフィルタが動くようになった。まだなおさないといけないところはある。。<br/><div class="youtube" data-type="yt" id="Y_PwFg6RHGk"><div class="yt-title">Youtube - 波形メモリ音源の制作ーフィルタの実装</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/Y_PwFg6RHGk" class="youtube" src="https://i.ytimg.com/vi/Y_PwFg6RHGk/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176604869739700225"
            target="_blank">2019/9/25 6:10:35</a></p>
      </header>
      <section>
        <p class="tweet-text">これが終わったらピッチのテストか。。これでようやく波形メモリシンセとしては完成か。。次は演奏部分（シーケンサ）を作らなくてはいけないな。過去何度も演奏エンジンだけで作ってエディタで挫折してるので、なんとか乗り越えたいところ。。今回はpegで演奏用の言語（MMLではない）を作ろうかなと。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176606000331161600"
            target="_blank">2019/9/25 6:15:05</a></p>
      </header>
      <section>
        <p class="tweet-text">今回作ってて面白いなと思ったのは、式からの波形生成。以下のような式を作って波形を作ると、鋸波と正弦波が半分ずつミックスされて聞こえるところ。式から聞こえる音がなんとなく想像できるのが楽しいなと。当たり前の話だけどね。。<br/><br/>Math.sin(t * Math.PI) * 0.5 + t * 0.5</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176606132426555392"
            target="_blank">2019/9/25 6:15:36</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにtは0-1の間で変化する。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176606918367830016"
            target="_blank">2019/9/25 6:18:44</a></p>
      </header>
      <section>
        <p class="tweet-text">まだ単音でしか鳴らせてないので、これが８音ポリくらいになったときに処理負荷がどれくらいになるのか想像がつかんので、やってみるしかないんだけど、そこがちょっと不安かなと。あ、そういえばマルチ・ティンバーで鳴るようにするコードも書かんといかん。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176606919726755840"
            target="_blank">2019/9/25 6:18:44</a></p>
      </header>
      <section>
        <p class="tweet-text">あとサンプラ機能もな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176966370514259968"
            target="_blank">2019/9/26 6:07:04</a></p>
      </header>
      <section>
        <p class="tweet-text">ピッチ部分のUIも作ったが、見事にBugっている。ピッチEGいじってるうちにパックマンがやられた時のような音が出た。。<br/><br/><div class="youtube" data-type="yt" id="2jkCjBYPCgQ"><div class="yt-title">Youtube - 波形メモリシンセの作成 - Pitch UIの作成</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/2jkCjBYPCgQ" class="youtube" src="https://i.ytimg.com/vi/2jkCjBYPCgQ/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176968911343898624"
            target="_blank">2019/9/26 6:17:10</a></p>
      </header>
      <section>
        <p class="tweet-text">波形はこんな感じで、正弦波を加算合成して作ったのですわ。。<br/>(Math.sin(t * Math.PI) + Math.sin(2 * t * Math.PI) + Math.sin(4 * t * Math.PI)) / 3 https://t.co/aZi53CdbtE</p>
        
        <img  class="tweet-img" src="https://pbs.twimg.com/media/EFVu_GiU8AAdeAd.jpg" />
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1176977843936382976"
            target="_blank">2019/9/26 6:52:39</a></p>
      </header>
      <section>
        <p class="tweet-text">ピッチの算出式はそもそも間違ってるようなので見直さんといかんな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1177333819377999874"
            target="_blank">2019/9/27 6:27:11</a></p>
      </header>
      <section>
        <p class="tweet-text">算出式は間違ってなかったけど、アルゴリズムが間違っていたな。。ピッチの計算は誤差の蓄積やら桁あふれやらデノーマルやらを考えるとf32ではなくu64の固定小数点で計算したほうがよさそうだな。。それでやってみるか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1177334676899282944"
            target="_blank">2019/9/27 6:30:35</a></p>
      </header>
      <section>
        <p class="tweet-text">f32のままでやってもいいけど小数点以下の桁数を抑えてデノーマルを防ぐようにするという手もあるかなぁ。でも結局波形テーブル引きするときに整数化するからなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179855167463677952"
            target="_blank">2019/10/4 5:26:07</a></p>
      </header>
      <section>
        <p class="tweet-text">64bit幅、小数部16bitの固定小数点で波形メモリのピッチを計算しなおすことにして実装中。固定小数点の乗算・除算のコツをすっかり忘れてしまってた。オーバーフローとか乗算後のシフトとか、除算前のシフトとかをね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179864850626822144"
            target="_blank">2019/10/4 6:04:35</a></p>
      </header>
      <section>
        <p class="tweet-text">これまでの成果。LFOとかピッチがちょっとおかしい。。<br/><div class="youtube" data-type="yt" id="GB0NjQfjIq0"><div class="yt-title">Youtube - 波形メモリ音源の作成-20191004</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/GB0NjQfjIq0" class="youtube" src="https://i.ytimg.com/vi/GB0NjQfjIq0/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179865325002608640"
            target="_blank">2019/10/4 6:06:28</a></p>
      </header>
      <section>
        <p class="tweet-text">フィルタ使えると管楽器的な音がリアルになるよなあ。やっぱり。時間的な周波数成分の変化は音色にとって重要だなということがわかる。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179866334001131520"
            target="_blank">2019/10/4 6:10:29</a></p>
      </header>
      <section>
        <p class="tweet-text">chromeでWASMのSIMDが試験的に実装されたので、それをいつどこで使うかだよなあ。まあもうちょっとちゃんと動くようになってから考えるか。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179866831642718208"
            target="_blank">2019/10/4 6:12:28</a></p>
      </header>
      <section>
        <p class="tweet-text">いちおうオシレータの部分は他の波形生成方式に差し替えできるように作ってるので、音源として完成したらFM方式のオシレータも作ってみたいんだよな。。AFM音源みたいなやつ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179879128595480576"
            target="_blank">2019/10/4 7:01:20</a></p>
      </header>
      <section>
        <p class="tweet-text">それよりもゲーム作りを進める方が先か。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179879539989565440"
            target="_blank">2019/10/4 7:02:58</a></p>
      </header>
      <section>
        <p class="tweet-text">あ、それとフィルタのQが全然効いてないのだった。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1179883258093264896"
            target="_blank">2019/10/4 7:17:44</a></p>
      </header>
      <section>
        <p class="tweet-text">まあしかし、この部分はほんとはAudioWorkletでなく、oscillator nodeやgain node、filter nodeを使用すればもっと簡単に実装できるのだが。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180221512021790721"
            target="_blank">2019/10/5 5:41:50</a></p>
      </header>
      <section>
        <p class="tweet-text">フィルタのQが効くようになった。またしても凡ミス。LPFはいい感じだけど、HPFの動作がおかしいね。。<br/><div class="youtube" data-type="yt" id="BY6nOLsil2I"><div class="yt-title">Youtube - 波形メモリシンセを作る-20191005</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/BY6nOLsil2I" class="youtube" src="https://i.ytimg.com/vi/BY6nOLsil2I/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180221691613433856"
            target="_blank">2019/10/5 5:42:33</a></p>
      </header>
      <section>
        <p class="tweet-text">やっぱりレゾナンス効かせるとシンセっぽくていいなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180757606832279552"
            target="_blank">2019/10/6 17:12:05</a></p>
      </header>
      <section>
        <p class="tweet-text">LFO当たりの修正を加える。さらにシンセっぽい音が鳴るようになったな。。<br/><div class="youtube" data-type="yt" id="V3qRc7NpV64"><div class="yt-title">Youtube - 自作ゲーム用の波形メモリ音源を作るー20191006</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/V3qRc7NpV64" class="youtube" src="https://i.ytimg.com/vi/V3qRc7NpV64/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1181331780474769409"
            target="_blank">2019/10/8 7:13:39</a></p>
      </header>
      <section>
        <p class="tweet-text">シーケンサに手をつけ始めた。シーケンサの構造を考えながら音源のポリ化を進めようかなと。パン二ングも実装せんとなあ。爆発音に必要なノイズジェネレータも実装せんといかんなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183502952180240384"
            target="_blank">2019/10/14 7:01:06</a></p>
      </header>
      <section>
        <p class="tweet-text">シーケンサの仕様が固まったので実装しつつ、仮想メモリ音源のマルチティンバー化も並行して進めている。8音か16音ポリのマルチティンバーとなる予定だが果たしてどうか。処理が追いつくのだろうか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183502953539223552"
            target="_blank">2019/10/14 7:01:07</a></p>
      </header>
      <section>
        <p class="tweet-text">多分音を鳴らすだけなら問題ないんだろうけど、ゲームのBGM用だからなあ。。フィルタの処理がやっぱり重いんで気になるところですわ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183503726792732672"
            target="_blank">2019/10/14 7:04:11</a></p>
      </header>
      <section>
        <p class="tweet-text">シーケンサの動作確認用も兼ねてMMLみたいな簡易言語を作るつもりである。書いたらバイナリ・データにコンパイルするやつである。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183504327085703169"
            target="_blank">2019/10/14 7:06:34</a></p>
      </header>
      <section>
        <p class="tweet-text">SIMD使うと2音～4音くらい同時に処理できてパフォーマンスアップできそうだけどね。。<br/><blockquote class="card card-default"><header><img  src="https://avatars3.githubusercontent.com/u/11578470?s=400&v=4" /><a href="https://github.com/WebAssembly/simd/blob/master/proposals/simd/SIMD.md" target="_blank">simd/SIMD.md at master · WebAssembly/simd · GitHub</a></header><div>Branch of the spec repo scoped to discussion of SIMD in WebAssembly  - WebAssembly/simd</div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183504439845380096"
            target="_blank">2019/10/14 7:07:01</a></p>
      </header>
      <section>
        <p class="tweet-text">まあとりあえず全部組み上げてから考えよう。最適化は。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/1198560316436578305/nSgQgalN_normal.jpg" />
        <p class="tweet-user-name">悠斗@yu_to_0511</p>
        
        <p class="tweet-date"><a href="https://twitter.com/yu_to_0511/status/1183346147257024512"
            target="_blank">2019/10/13 20:38:01</a></p>
      </header>
      <section>
        <p class="tweet-text">閃光福岡～！ #ラグビー日本代表 #ラグビー https://t.co/0weOYnwQSF</p>
        
        <video class="tweet-img" controls src="https://video.twimg.com/ext_tw_video/1183346044634947584/pu/vid/1072x642/Glz6tW_wcChusqlb.mp4?tag=10" />
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183335029235040256"
            target="_blank">2019/10/13 19:53:50</a></p>
      </header>
      <section>
        <p class="tweet-text">自作のwasmテキストフォーマット（S式）用のプリプロセッサのドキュメントを更新した。<br/><blockquote class="card card-default"><header><img  src="https://avatars0.githubusercontent.com/u/3806814?s=400&v=4" /><a href="https://github.com/sfpgmr/mwasm#mwasm" target="_blank">GitHub - sfpgmr/mwasm: wasmテキストフォーマットのプリプロセッサ拡張</a></header><div>wasmテキストフォーマットのプリプロセッサ拡張. Contribute to sfpgmr/mwasm development by creating an account on GitHub.</div></blockquote><br/><br/>#WebAssembly</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182796670435594240"
            target="_blank">2019/10/12 8:14:36</a></p>
      </header>
      <section>
        <p class="tweet-text">いきなり停電。<br/>#台風19号</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182796769022726145"
            target="_blank">2019/10/12 8:14:59</a></p>
      </header>
      <section>
        <p class="tweet-text">この段階で停電するとは。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182798431854575616"
            target="_blank">2019/10/12 8:21:36</a></p>
      </header>
      <section>
        <p class="tweet-text">とりあえずラジオをつける。手回し付きの充電器付き。<br/>#停電<br/>#台風19号</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182798709081296896"
            target="_blank">2019/10/12 8:22:42</a></p>
      </header>
      <section>
        <p class="tweet-text">おお、復旧した。<br/>#台風19号</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182807984323219456"
            target="_blank">2019/10/12 8:59:33</a></p>
      </header>
      <section>
        <p class="tweet-text">冷蔵庫も停電時の保冷に備えて水を凍らしとかんといかんな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182808144587608069"
            target="_blank">2019/10/12 9:00:11</a></p>
      </header>
      <section>
        <p class="tweet-text">ちなみにスマフォの充電器は20000mのやつを2台確保ずみ。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182808527766581248"
            target="_blank">2019/10/12 9:01:43</a></p>
      </header>
      <section>
        <p class="tweet-text">さっき編集してたソースコードは吹っ飛びましたな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182829393896304640"
            target="_blank">2019/10/12 10:24:38</a></p>
      </header>
      <section>
        <p class="tweet-text">雨がすごいな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182928534395707392"
            target="_blank">2019/10/12 16:58:35</a></p>
      </header>
      <section>
        <p class="tweet-text">風が強くなってきたな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182978701878685697"
            target="_blank">2019/10/12 20:17:55</a></p>
      </header>
      <section>
        <p class="tweet-text">風は15号の時のほうがすごかった気がするな。。まだ油断は禁物だが。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182996079052148737"
            target="_blank">2019/10/12 21:26:58</a></p>
      </header>
      <section>
        <p class="tweet-text">いやいやそんなことはないな。やっぱり怖いや。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183032661532499968"
            target="_blank">2019/10/12 23:52:20</a></p>
      </header>
      <section>
        <p class="tweet-text">もう過ぎたか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1183127793929867264"
            target="_blank">2019/10/13 6:10:22</a></p>
      </header>
      <section>
        <p class="tweet-text">風は強かったけど、15号の時のほうがヤバかったな。雨はあまり降らずに通過。まああくまでうちの地域はだけど。しかし他県は雨がすごくて氾濫・決壊か。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182804515348611076"
            target="_blank">2019/10/12 8:45:46</a></p>
      </header>
      <section>
        <p class="tweet-text">@syntaxerrors72 この間の台風で玄関の門柱が破壊されたので、今回はどうなることやら。。地デジのアンテナが飛んでかないか心配ですが。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182803681499959297"
            target="_blank">2019/10/12 8:42:27</a></p>
      </header>
      <section>
        <p class="tweet-text">@syntaxerrors72 マジでした。でも今は復旧してます。水道の水圧もなぜかおかしいです。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182258947450761216"
            target="_blank">2019/10/10 20:37:53</a></p>
      </header>
      <section>
        <p class="tweet-text">関東大会の組み合わせが確定したか。。<br/><a href="https://chbf.or.jp/wp-content/uploads/2019/10/%E7%AC%AC%EF%BC%97%EF%BC%92%E5%9B%9E%E7%A7%8B%E5%AD%A3%E9%96%A2%E6%9D%B1%E5%A4%A7%E4%BC%9A%E7%B5%84%E5%90%88%E3%81%9B.pdf" target="_blank">chbf.or.jp/wp-content/upl…</a></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182259558699266048"
            target="_blank">2019/10/10 20:40:18</a></p>
      </header>
      <section>
        <p class="tweet-text">習志野は前橋育英、もし勝ったら次はおそらく東海大相模、そして拓大紅陵は花咲徳栄かあ。。厳しいなあ。。センバツも狭き門だ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182260007900864512"
            target="_blank">2019/10/10 20:42:05</a></p>
      </header>
      <section>
        <p class="tweet-text">桐生第一は１勝すればほぼセンバツ当確かあ。やはり地元開催は地の利があるなあ。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1182015895821930496"
            target="_blank">2019/10/10 4:32:05</a></p>
      </header>
      <section>
        <p class="tweet-text">週末の台風大丈夫だろうか。。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180646885498900480"
            target="_blank">2019/10/6 9:52:07</a></p>
      </header>
      <section>
        <p class="tweet-text">習志野と拓大紅陵の決勝。やはり竹内くん、山内くんは投げないわな。堀井くんと加藤くん。加藤くんは一年生か。。山内くんはセンターか。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180647008639406082"
            target="_blank">2019/10/6 9:52:36</a></p>
      </header>
      <section>
        <p class="tweet-text">打撃力もあるからね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180653651351633920"
            target="_blank">2019/10/6 10:19:00</a></p>
      </header>
      <section>
        <p class="tweet-text">堀井くんの投球フォームってなんか古谷くんに似てる気がするなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180655371544743936"
            target="_blank">2019/10/6 10:25:50</a></p>
      </header>
      <section>
        <p class="tweet-text">拓大紅陵の佐藤くん２回表３Kか。すごいな。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180662656329322497"
            target="_blank">2019/10/6 10:54:47</a></p>
      </header>
      <section>
        <p class="tweet-text">と思ったら3回で8-1か。。こりゃ一方的な展開。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180663368077627392"
            target="_blank">2019/10/6 10:57:37</a></p>
      </header>
      <section>
        <p class="tweet-text">何より和田くんが長打したのが良いね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180663943850684417"
            target="_blank">2019/10/6 10:59:54</a></p>
      </header>
      <section>
        <p class="tweet-text">ピッチャー山根くんに交代か。もうちょっと堀井くん投げて欲しかったけどなあ。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180725113651511297"
            target="_blank">2019/10/6 15:02:58</a></p>
      </header>
      <section>
        <p class="tweet-text">結果は習志野14-3拓大紅陵か。竹内くんのリリーフはなかったのね。まあ序盤であれじゃ投げる場面はふつうないなあ。。関東大会での活躍に期待といったところか。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180725114880421888"
            target="_blank">2019/10/6 15:02:58</a></p>
      </header>
      <section>
        <p class="tweet-text">習志野はこれで関東大会の１回戦は他地区の２位と戦うことになって多少有利になる。その次が結構高い壁なんだよな。。クジ運も大事。でも今の習志野のチーム力だといける確率はかなり高い。和田くんもこれで勢いがついて関東大会でも活躍してほしいね。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180726286269870080"
            target="_blank">2019/10/6 15:07:38</a></p>
      </header>
      <section>
        <p class="tweet-text">堀井くんー山根くんの継投で３点に抑えたのもよかったよな。ただ堀井くんちょっとコントロールに課題ありそうだね。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180768138792562689"
            target="_blank">2019/10/6 17:53:56</a></p>
      </header>
      <section>
        <p class="tweet-text">関東大会各県代表<br/><br/>【群馬】<br/>１桐生第一<br/>２前橋育英<br/>３健大高崎<br/><br/>【茨城】<br/>１常総学院<br/>２霞ヶ浦<br/><br/>【栃木】<br/>１青藍泰斗<br/>２文星芸大附<br/><br/>【埼玉】<br/>１花咲徳栄<br/>２西武台<br/><br/>【山梨】<br/>１山梨学院<br/>２駿台甲府<br/><br/>【神奈川】<br/>１東海大相模<br/>２桐光学園<br/><br/>【千葉】<br/>１習志野<br/>２拓大紅陵</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180768653794373633"
            target="_blank">2019/10/6 17:55:59</a></p>
      </header>
      <section>
        <p class="tweet-text">うーむ。やはりそうそうたるメンツですな。浦和学院や横浜、作新学院の名がないのがちとさみしいが。。</p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180769049451454464"
            target="_blank">2019/10/6 17:57:33</a></p>
      </header>
      <section>
        <p class="tweet-text">さて、習志野は昨年に続いてセンバツ出場なるか。そして拓大紅陵は久々のセンバツ出場を果たすのか。</p>
        
      </section>
      
    </article>
    
    <article>
      
      
      <header class="tweet-header">
        
        <img class="tweet-profile-img"  src="https://pbs.twimg.com/profile_images/899158435194847232/cbkY7XUx_normal.jpg" />
        <p class="tweet-user-name">S.F.@SFPGMR</p>
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180760000429318144"
            target="_blank">2019/10/6 17:21:36</a></p>
      </header>
      <section>
        <p class="tweet-text">ナムコの波形メモリ音源の存在に最初気付いたのはやっぱり「ディグダグ」かなあと思うな。なんかあきらかに他のゲームと音の質が違ってたし、目立ってたもんなあ。。当時波形メモリ音源なんていうのは当然知らんけど、音の違いだけは分かってた感じですな。<br/><br/><div class="youtube" data-type="yt" id="V8jX85rOlX0"><div class="yt-title">Youtube - 1982 [60fps] Dig Dug 4452990pts Hardest Round256</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/V8jX85rOlX0" class="youtube" src="https://i.ytimg.com/vi/V8jX85rOlX0/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180760837255884800"
            target="_blank">2019/10/6 17:24:55</a></p>
      </header>
      <section>
        <p class="tweet-text">マッピーなんちゅうのはデモ音で十分ゲーセンで目立ってて、さらにゲーム始めるとBGMが響き渡ってすごく目立ってましたな。<br/><div class="youtube" data-type="yt" id="7ssb1ppkrj0"><div class="yt-title">Youtube - 1983 [60fps] Mappy 1075810pts Nomiss Round50</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/7ssb1ppkrj0" class="youtube" src="https://i.ytimg.com/vi/7ssb1ppkrj0/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180761547104116737"
            target="_blank">2019/10/6 17:27:44</a></p>
      </header>
      <section>
        <p class="tweet-text">「リブル・ラブル」もそこそこ面白くて結構お金使ったけど、BGM聴きたさもちょっとあったと思うな。。なんか今聞いてもいい音してると思ってしまうなあ。。<br/><br/><div class="youtube" data-type="yt" id="t-LxxYYCnGg"><div class="yt-title">Youtube - 1983 [60fps] Libble Rabble 1775070pts 20miracles</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/t-LxxYYCnGg" class="youtube" src="https://i.ytimg.com/vi/t-LxxYYCnGg/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180762256881020928"
            target="_blank">2019/10/6 17:30:34</a></p>
      </header>
      <section>
        <p class="tweet-text">ギャプラスも今聞き返すと結構リッチな音鳴ってますなあ。PSGとは明らかに違う。<br/><br/><div class="youtube" data-type="yt" id="TdwZsbAzki4"><div class="yt-title">Youtube - 1984 [60fps] Gaplus 10000000pts (Loop1 st1-256)</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/TdwZsbAzki4" class="youtube" src="https://i.ytimg.com/vi/TdwZsbAzki4/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180762900928942080"
            target="_blank">2019/10/6 17:33:07</a></p>
      </header>
      <section>
        <p class="tweet-text">ギャラガもそうなんだよな。ゲーム・スタートとかネーム・エントリとかもね。これを当時PSG装備のPCで真似てもその音には決してならんかったもんな。なんで違うんだ？と当時思った。波形が違うと知ったのはかなり後の話。<br/><br/><blockquote class="card card-default"><header><div class="no-image" >No Image</div><a href="https://www.youtube.com/watch?v=Q5xL89dKp4k" target="_blank">YouTube</a></header><div></div></blockquote></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180763332887756800"
            target="_blank">2019/10/6 17:34:50</a></p>
      </header>
      <section>
        <p class="tweet-text">よく聞いたらパックマンもそうですな。。なんか鋸波っぽい音もしてるもんな。。<br/><br/><div class="youtube" data-type="yt" id="MJwCyuFEZm0"><div class="yt-title">Youtube - 1980 [60fps] PuckMan 300000pts Nomiss</div><svg class="player-play" width="64" height="64" xmlns="http://www.w3.org/2000/svg"><g><path class="player-play-1" fill="#ffffff" stroke-width="1" d="m0,0l64,32l-64,32l0,-64z" /></g></svg><img  data-href="https://youtu.be/MJwCyuFEZm0" class="youtube" src="https://i.ytimg.com/vi/MJwCyuFEZm0/hqdefault.jpg" /></div>   <br/></p>
        
      </section>
      
      <header class="tweet-header">
        
        <p class="tweet-date"><a href="https://twitter.com/SFPGMR/status/1180764754865901568"
            target="_blank">2019/10/6 17:40:29</a></p>
      </header>
      <section>
        <p class="tweet-text">パックマンは私自身下手過ぎて洒落にならんかった。だけどうまい人のプレイを見てるのは楽しかったなあ。。</p>
        
      </section>
      
    </article>
    
  </div>
  <footer>
    CopyLight 2019 Satoshi Fujiwara
  </footer>
  <script async src="https://platform.twitter.com/widgets.js"></script>

  <script async src="./index.js"></script>

</body>

</html>